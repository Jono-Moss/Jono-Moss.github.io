<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Software on Jonathan Moss</title>
        <link>http://localhost:1313/tags/software/</link>
        <description>Recent content in Software on Jonathan Moss</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Fri, 06 Dec 2024 00:00:00 +0000</lastBuildDate><atom:link href="http://localhost:1313/tags/software/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>OpnSense - How To Create A Custom Dashboard Widget</title>
        <link>http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/</link>
        <pubDate>Fri, 06 Dec 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/</guid>
        <description>&lt;img src="http://localhost:1313/splash.jpg" alt="Featured image of post OpnSense - How To Create A Custom Dashboard Widget" /&gt;&lt;h2 id=&#34;introduction&#34;&gt;Introduction
&lt;/h2&gt;&lt;p&gt;Here is a quick write up of how to create your own dashboard widget on OpnSense.&lt;br&gt;
At the time of writing this, I am using OpnSense version 24.7.
The original documents can be found at:&lt;br&gt;
&lt;a class=&#34;link&#34; href=&#34;https://docs.opnsense.org/development/frontend/dashboard.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://docs.opnsense.org/development/frontend/dashboard.html&lt;/a&gt;
We will be taking the existing widgets and merge them into one big widget with our own styling and layout. The purpose on this guide is not to be a javascript and  html development tutorial, but instead show the basics of how to start developing a widget.&lt;/p&gt;
&lt;h2 id=&#34;the-development-environment&#34;&gt;The Development Environment
&lt;/h2&gt;&lt;p&gt;At the time of writing this, I was doing a few network designs and projects using GNS3.
So I decided to make a &amp;ldquo;Lab&amp;rdquo; on there and turn that into a small development environment.&lt;br&gt;
The lab consisted of 4 &amp;ldquo;Appliances&amp;rdquo;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Cloud - to give us access to the internet&lt;/li&gt;
&lt;li&gt;OpnSense VM&lt;/li&gt;
&lt;li&gt;An Ubuntu VM (We will use this as our development machine)&lt;/li&gt;
&lt;li&gt;A basic switch (This is not really needed)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/1.jpg&#34;
	width=&#34;1920&#34;
	height=&#34;1080&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/1_hu17542189062530623946.jpg 480w, http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/1_hu3638503620387489744.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Lab Setup&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;177&#34;
		data-flex-basis=&#34;426px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Make sure to set / change the &amp;ldquo;Console&amp;rdquo; setting for both  the OpnSense and Ubuntu VM to be &amp;ldquo;Spice Agent&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Once the lab is setup, we will move to setting up the &amp;ldquo;Appliances&amp;rdquo;&lt;/p&gt;
&lt;h3 id=&#34;opnsense-vm&#34;&gt;OpnSense VM
&lt;/h3&gt;&lt;p&gt;The first thing you will need to do is assign the interfaces so that OpnSense knows&lt;br&gt;
which is your WAN interface and  which is your LAN interface.&lt;br&gt;
This can be done by &amp;ldquo;Double Clicking&amp;rdquo; on the OpnSense Appliance, login using the default login details:&lt;br&gt;
user: root&lt;br&gt;
pass: opnsense&lt;br&gt;
Then using the &amp;ldquo;Assign Interfaces&amp;rdquo; option in the menu.&lt;/p&gt;
&lt;p&gt;Once that id done, we need to enable &lt;code&gt;SSH&lt;/code&gt; access for the root user so that we can access the files on OpnSense.&lt;/p&gt;
&lt;p&gt;I did this via the &amp;ldquo;Web UI&amp;rdquo;, using the Ubuntu VM. Since the default LAN IP is set to be:&lt;br&gt;
192.168.1.1/24&lt;br&gt;
I &amp;ldquo;Double Clicked&amp;rdquo; on the Ubuntu VM to open it and used Firefox to access the &amp;ldquo;web UI&amp;rdquo; on 192.168.1.1.&lt;/p&gt;
&lt;p&gt;From there head over to:&lt;br&gt;
System-&amp;gt;Settings-&amp;gt;Administration&lt;br&gt;
Then enable the &lt;code&gt;Secure Shell Server&lt;/code&gt;, &lt;code&gt;Permit Root User Login&lt;/code&gt; and &lt;code&gt;Permit Password Login&lt;/code&gt;.&lt;br&gt;
Save and Apply the changes.&lt;br&gt;
We now are able to use sFTP to access the files on OpnSense.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/2.jpg&#34;
	width=&#34;1657&#34;
	height=&#34;926&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/2_hu107056679740965531.jpg 480w, http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/2_hu13291947008027049332.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enable SSH&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;178&#34;
		data-flex-basis=&#34;429px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;ubuntu-vm&#34;&gt;Ubuntu VM
&lt;/h3&gt;&lt;p&gt;You  may use whatever program you would like to use to develop the widget,&lt;br&gt;
since it is only HTML and Javascript, there is no need for any &amp;ldquo;heavy IDE&amp;rdquo;.
I started just using Ubuntu&amp;rsquo;s default text editor but moved to  installing VSCode as I
wanted things like code folding that I  was not getting from the default editor.&lt;/p&gt;
&lt;h2 id=&#34;widget-file-structure&#34;&gt;Widget File Structure
&lt;/h2&gt;&lt;p&gt;There are 4 main locations that you will use to store your files for dashboard widgets
to work:&lt;br&gt;
Widgets are stored in:&lt;br&gt;
/usr/local/opnsense/www/js/widgets/
Were your widgets core file will be stored:&lt;br&gt;
/usr/local/opnsense/www/js/widgets/Metadata/
CSS file for styling, however I suggest sticking to inline CSS:&lt;br&gt;
/usr/local/opnsense/www/css/dashboard.css
Images can be stored in the &amp;ldquo;themes&amp;rdquo; directory:&lt;br&gt;
/ui/themes/&lt;/p&gt;
&lt;h3 id=&#34;files-that-make-the-widget&#34;&gt;Files That make The Widget
&lt;/h3&gt;&lt;p&gt;There are 2 main files that make a widget:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The &amp;ldquo;core&amp;rdquo; .xml file, which is used to register the widget in OpnSense and store &amp;ldquo;Localisation&amp;rdquo; info.&lt;/li&gt;
&lt;li&gt;The &amp;ldquo;widget&amp;rdquo; .js file, which is where all the widget logic and UI is created.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The &amp;ldquo;core&amp;rdquo; file is stored in the &lt;code&gt;/usr/local/opnsense/www/js/widgets/Metadata/&lt;/code&gt; folder.&lt;br&gt;
You can name it anything you like, in this guide we will call it &lt;code&gt;jonoCustomwidget.xml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;The &amp;ldquo;widget&amp;rdquo; file is created an stored in the &lt;code&gt;/usr/local/opnsense/www/js/widgets/&lt;/code&gt; folder.
You can name it anything you like, in this guide we will call it &lt;code&gt;JonoCustom.js&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;With that in mind, I will go over how to access the folders and files in order to start developing your widget.&lt;/p&gt;
&lt;h2 id=&#34;accessing-the-folders-and-files&#34;&gt;Accessing the folders and Files
&lt;/h2&gt;&lt;p&gt;Ubuntu&amp;rsquo;s &amp;ldquo;file explorer&amp;rdquo; has the ability to access files directly using sFTP, so we can easily
access the files on OpnSense using that feature.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Open the &amp;ldquo;file explorer&amp;rdquo; and click on the &lt;code&gt;Other Locations&lt;/code&gt; option at the bottom left.
&lt;img src=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/3.jpg&#34;
	width=&#34;789&#34;
	height=&#34;491&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/3_hu9712383050301540345.jpg 480w, http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/3_hu2617004867995762272.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;other locations&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;160&#34;
		data-flex-basis=&#34;385px&#34;
	
&gt;&lt;/li&gt;
&lt;li&gt;Then in the input at the bottom, you can use the following to access the files:&lt;br&gt;
&lt;code&gt;ssh://opnsenseip&lt;/code&gt;&lt;br&gt;
or&lt;br&gt;
&lt;code&gt;sftp://opnsense-ip&lt;/code&gt;
So in this guide it will be:
&lt;code&gt;ssh://192.168.1.1&lt;/code&gt;&lt;br&gt;
or&lt;br&gt;
&lt;code&gt;sftp://192.168.1.1&lt;/code&gt;&lt;br&gt;
&lt;img src=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/4.jpg&#34;
	width=&#34;336&#34;
	height=&#34;42&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/4_hu12344438867962509555.jpg 480w, http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/4_hu18004197145845666907.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;other locations&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;800&#34;
		data-flex-basis=&#34;1920px&#34;
	
&gt;&lt;/li&gt;
&lt;li&gt;You will be prompted to enter in your OpnSense credentials to get access.
&lt;img src=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/5.jpg&#34;
	width=&#34;792&#34;
	height=&#34;493&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/5_hu5000654943412074896.jpg 480w, http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/5_hu1727594751128335849.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;credentials&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;160&#34;
		data-flex-basis=&#34;385px&#34;
	
&gt;&lt;/li&gt;
&lt;li&gt;You will then be taken to the users home folder, in my case, since I logged into OpnSense using the root user, I will be taken to the root users home folder which is currently empty.&lt;br&gt;
&lt;img src=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/6.jpg&#34;
	width=&#34;792&#34;
	height=&#34;493&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/6_hu9964699273509243606.jpg 480w, http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/6_hu11525680744578429719.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;root home&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;160&#34;
		data-flex-basis=&#34;385px&#34;
	
&gt;&lt;/li&gt;
&lt;li&gt;From there, you can click on the &amp;ldquo;IP Address&amp;rdquo; at the top navigation pane and remove the &amp;ldquo;Trailing path&amp;rdquo;, in this to go back out of the &amp;ldquo;root home&amp;rdquo; folder and out to the top most path / folder of OpnSense.&lt;br&gt;
So in my case I will change it from &lt;code&gt;sftp://192.168.1.1/root&lt;/code&gt; back to  &lt;code&gt;sftp://192.168.1.1&lt;/code&gt;
and then press the &lt;code&gt;Enter&lt;/code&gt; key on my  keyboard to go to the main path.
&lt;img src=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/7.jpg&#34;
	width=&#34;792&#34;
	height=&#34;493&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/7_hu11663706857422448422.jpg 480w, http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/7_hu15067816128988749625.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;top path&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;160&#34;
		data-flex-basis=&#34;385px&#34;
	
&gt;&lt;/li&gt;
&lt;li&gt;We can now &amp;ldquo;visually&amp;rdquo; navigate the OpnSense file system easily. &lt;br&gt;
From here we will navigate to the main widget folder which is located at:&lt;br&gt;
&lt;code&gt;/usr/local/opnsense/www/js/widgets/&lt;/code&gt;&lt;br&gt;
&lt;img src=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/8.jpg&#34;
	width=&#34;792&#34;
	height=&#34;493&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/8_hu18376066468696601028.jpg 480w, http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/8_hu2885081539524985013.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;top path&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;160&#34;
		data-flex-basis=&#34;385px&#34;
	
&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;create-the-files&#34;&gt;Create the Files
&lt;/h2&gt;&lt;h3 id=&#34;the-widget-file&#34;&gt;The &amp;ldquo;Widget&amp;rdquo; File
&lt;/h3&gt;&lt;p&gt;We will start with creating the &amp;ldquo;widget&amp;rdquo; js file. To do this, open the IDE that you will use to develop the widget.&lt;br&gt;
In the IDE, create a new &amp;ldquo;js&amp;rdquo; file, navigate to the &lt;code&gt;/usr/local/opnsense/www/js/widgets/&lt;/code&gt; folder and save it.&lt;br&gt;
Since we have it open in the Ubuntu file explorer, we can access the folder via the UI by selecting it on the left menu panel.&lt;br&gt;
&lt;img src=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/9.jpg&#34;
	width=&#34;1195&#34;
	height=&#34;643&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/9_hu12272062619269345971.jpg 480w, http://localhost:1313/post/opnsense-dashboard-widget-06-12-2024/9_hu10527292861768238781.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;save widget file&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;185&#34;
		data-flex-basis=&#34;446px&#34;
	
&gt;
You can name it whatever you like, in this guide I will name it:
&lt;code&gt;JonoCustom.js&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;the-core-file&#34;&gt;The &amp;ldquo;Core&amp;rdquo; File
&lt;/h3&gt;&lt;p&gt;Using the same stpes as above. Create an XML file in the following folder, name it whatever you like:&lt;br&gt;
&lt;code&gt;/usr/local/opnsense/www/js/widgets/Metadata/&lt;/code&gt;
In this guide I named it &lt;code&gt;jonoCustomwidget.xml&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;let-the-development-begin&#34;&gt;Let the Development Begin
&lt;/h2&gt;&lt;h3 id=&#34;the-core-file-1&#34;&gt;The &amp;ldquo;Core&amp;rdquo; File
&lt;/h3&gt;&lt;p&gt;You can copy and paste the code below into your XML file, I will explain each section to you:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;metadata&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;lt;jonoCustomwidget&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;lt;filename&amp;gt;&lt;/span&gt;JonoCustom.js&lt;span class=&#34;nt&#34;&gt;&amp;lt;/filename&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;lt;link&amp;gt;&lt;/span&gt;https://jonomoss.com&lt;span class=&#34;nt&#34;&gt;&amp;lt;/link&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;lt;endpoints&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;endpoint&amp;gt;&lt;/span&gt;/api/diagnostics/system/systemResources&lt;span class=&#34;nt&#34;&gt;&amp;lt;/endpoint&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;lt;/endpoints&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;lt;translations&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Jono Custom Widget&lt;span class=&#34;nt&#34;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;used&amp;gt;&lt;/span&gt;Used&lt;span class=&#34;nt&#34;&gt;&amp;lt;/used&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;free&amp;gt;&lt;/span&gt;Free&lt;span class=&#34;nt&#34;&gt;&amp;lt;/free&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;firewall&amp;gt;&lt;/span&gt;Firewall Logs&lt;span class=&#34;nt&#34;&gt;&amp;lt;/firewall&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;action&amp;gt;&lt;/span&gt;Action&lt;span class=&#34;nt&#34;&gt;&amp;lt;/action&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;time&amp;gt;&lt;/span&gt;Time&lt;span class=&#34;nt&#34;&gt;&amp;lt;/time&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;interface&amp;gt;&lt;/span&gt;Interface&lt;span class=&#34;nt&#34;&gt;&amp;lt;/interface&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;source&amp;gt;&lt;/span&gt;Source&lt;span class=&#34;nt&#34;&gt;&amp;lt;/source&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;destination&amp;gt;&lt;/span&gt;Destination&lt;span class=&#34;nt&#34;&gt;&amp;lt;/destination&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;port&amp;gt;&lt;/span&gt;Port&lt;span class=&#34;nt&#34;&gt;&amp;lt;/port&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;matchedrule&amp;gt;&lt;/span&gt;Matched rule&lt;span class=&#34;nt&#34;&gt;&amp;lt;/matchedrule&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;interfaces&amp;gt;&lt;/span&gt;Interfaces&lt;span class=&#34;nt&#34;&gt;&amp;lt;/interfaces&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;services&amp;gt;&lt;/span&gt;Services&lt;span class=&#34;nt&#34;&gt;&amp;lt;/services&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;noservices&amp;gt;&lt;/span&gt;No services found&lt;span class=&#34;nt&#34;&gt;&amp;lt;/noservices&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;running&amp;gt;&lt;/span&gt;Running&lt;span class=&#34;nt&#34;&gt;&amp;lt;/running&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;stopped&amp;gt;&lt;/span&gt;Stopped&lt;span class=&#34;nt&#34;&gt;&amp;lt;/stopped&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;restart&amp;gt;&lt;/span&gt;Restart&lt;span class=&#34;nt&#34;&gt;&amp;lt;/restart&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;stop&amp;gt;&lt;/span&gt;Stop&lt;span class=&#34;nt&#34;&gt;&amp;lt;/stop&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;start&amp;gt;&lt;/span&gt;Start&lt;span class=&#34;nt&#34;&gt;&amp;lt;/start&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;gateway&amp;gt;&lt;/span&gt;Gateways&lt;span class=&#34;nt&#34;&gt;&amp;lt;/gateway&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;rtt&amp;gt;&lt;/span&gt;RTT&lt;span class=&#34;nt&#34;&gt;&amp;lt;/rtt&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;rttd&amp;gt;&lt;/span&gt;RTTd&lt;span class=&#34;nt&#34;&gt;&amp;lt;/rttd&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nt&#34;&gt;&amp;lt;loss&amp;gt;&lt;/span&gt;Loss&lt;span class=&#34;nt&#34;&gt;&amp;lt;/loss&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;lt;/translations&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;lt;/jonoCustomwidget&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;/metadata&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;The first parent &amp;ldquo;tag&amp;rdquo; in the XML file needs to be &lt;code&gt;&amp;lt;metadata&amp;gt;&amp;lt;/metadata&amp;gt;&lt;/code&gt; this tells OpnSense what the content inside it will be linked to / be about.&lt;br&gt;
You need to always have this in the core file.&lt;/li&gt;
&lt;li&gt;The next tag in the &lt;code&gt;&amp;lt;metadata&amp;gt;&amp;lt;/metadata&amp;gt;&lt;/code&gt; will be what you want to call your widget.    In this case we will call it &lt;code&gt;&amp;lt;jonoCustomwidget&amp;gt;&amp;lt;/jonoCustomwidget&amp;gt; &lt;/code&gt; This is what yo will see in the &amp;ldquo;Widget List&amp;rdquo; when adding it to the dashboard.&lt;/li&gt;
&lt;li&gt;The next tag in the &lt;code&gt;&amp;lt;jonoCustomwidget&amp;gt;&amp;lt;/jonoCustomwidget&amp;gt; &lt;/code&gt; section is the &lt;code&gt;&amp;lt;filename&amp;gt;JonoCustom.js&amp;lt;/filename&amp;gt;&lt;/code&gt;.&lt;br&gt;
This tells OpnSense what the name of the &amp;ldquo;Widget&amp;rdquo; js file is.&lt;br&gt;
In the previous file creation section. We create and named the &amp;ldquo;widget&amp;rdquo; file &lt;code&gt;JonoCustom.js&lt;/code&gt;.
So it is very important that it matches the name  of the file you created.&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;&amp;lt;link&amp;gt;https://jonomoss.com&amp;lt;/link&amp;gt;&lt;/code&gt; tag is not really used, but it is be a nice place to put a link to where a developer or user can get more info about the widget.&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;&amp;lt;endpoints&amp;gt;&amp;lt;/endpoints&amp;gt;&lt;/code&gt; section is where you will tell OpnSense what &amp;ldquo;endpoints&amp;rdquo; the widget will be using. From there OpnSense will see if the current logged in user has access to those endpoints (ACL).&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Important&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In this guide and example I forgot to add all the end points. However since I login to the OpnSense web UI via the &amp;ldquo;root&amp;rdquo; user, the widget will still work. If however a user who does not have access to the endpoints uses this widget, they will run into errors.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;The &lt;code&gt; &amp;lt;translations&amp;gt;&amp;lt;/translations&amp;gt;&lt;/code&gt; section is used  for static text in your widget, you can give the tag any name and that will be used to reference the value  / text in it. &lt;code&gt;&amp;lt;keyName&amp;gt;&amp;lt;/keyName&amp;gt;&lt;/code&gt;. As an example, you  can create a &amp;ldquo;translation&amp;rdquo; with the key as &lt;code&gt;&amp;lt;title&amp;gt;My Widget&amp;lt;/title&amp;gt;&lt;/code&gt; and in the &amp;ldquo;widget&amp;rdquo; file, you can reference and use the &amp;ldquo;My Widget&amp;rdquo; text by using the  following code:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;translations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;the-widget-file-1&#34;&gt;The &amp;ldquo;Widget&amp;rdquo; File
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;When creating your widget, your class has to extend one of the three base classes:&lt;br&gt;
BaseWidget&lt;br&gt;
BaseTableWidget&lt;br&gt;
BaseGaugeWidget&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The BaseTableWidget and BaseGaugeWidget both extend the BaseWidget but have some built in functions to be able to speed up the creation of either a &amp;ldquo;table&amp;rdquo; based widget or a &amp;ldquo;gauge&amp;rdquo; based widget.
when I started this guide, I was focusing on creating a &amp;ldquo;Firewall Log&amp;rdquo; widget. So I started by extending the &lt;code&gt;BaseTableWidget&lt;/code&gt;. However, as I got more knowledgeable and comfortable with how the widgets worked. I stopped using OpnSense&amp;rsquo;s table functions and instead wrote my own. I did not change the extends to be &lt;code&gt;BaseWidget&lt;/code&gt;, How ever it does not really make a difference to my widget.&lt;/p&gt;
&lt;p&gt;So in this guide the class we will create will be as follows:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Jono&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;extends&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BaseTableWidget&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;There are 5 main functions that OpnSense triggers when you use your widget,&lt;br&gt;
The following are the main functions:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;constructor - Run once when widget is created&lt;/li&gt;
&lt;li&gt;getMarkup - Run once when widget is started&lt;/li&gt;
&lt;li&gt;onMarkupRendered - called once after &amp;ldquo;getMarkup&amp;rdquo; is completed&lt;/li&gt;
&lt;li&gt;onWidgetTick - Run every tick, you can set the &amp;ldquo;tick rate&amp;rdquo; in the constructor, this is where you get and refresh the widgets data&lt;/li&gt;
&lt;li&gt;onWidgetClose - Run once when widget is closed&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;constructor&#34;&gt;Constructor
&lt;/h4&gt;&lt;p&gt;The only things we will do in the constructor is set the &amp;ldquo;tick rate&amp;rdquo; and  add a &amp;ldquo;locked&amp;rdquo; variable that the &amp;ldquo;service&amp;rdquo; system needed to keep track of its state.&lt;/p&gt;
&lt;p&gt;These variables are declared in the parent class, we are just setting the values in our child class.&lt;/p&gt;
&lt;h4 id=&#34;getmarkup&#34;&gt;getMarkup()
&lt;/h4&gt;&lt;p&gt;The getMarkup() function is then called after the constructor, this is used to create the main HTML structure of the widget.&lt;br&gt;
Since I want to have multiple widgets in one, my getMarkup() function was looking messy and become difficult to follow.&lt;br&gt;
So what I decided to do was  to create a separate  function for each widget section I wanted and then called them here.&lt;br&gt;
I have made comments in the file so it should be easy to follow. Doing it this way also allows for me to easily extract the different  widgets code out of this file and use them else where if I want to create a new widget in the future.&lt;/p&gt;
&lt;p&gt;The next thing that I did was to add a function that will include all the CSS into my widget. When I was using the CSS file that the OpnSense documents recommended&lt;br&gt;
&lt;code&gt;/usr/local/opnsense/www/css/dashboard.css&lt;/code&gt;&lt;br&gt;
I noticed that after OpnSense did an update. All my CSS was removed from that file.&lt;br&gt;
So instead I decided to move all the CSS into the widget itself and add it to  the html in this getMarkup() function.&lt;br&gt;
Now updates will not interfere with the widget.&lt;/p&gt;
&lt;p&gt;#### onMarkupRendered()
This is called after the getMarkup() function.&lt;br&gt;
The purpose of this function is to add more data to the main widget HTML structure
but could only be done once the initial structure is on the DOM.&lt;/p&gt;
&lt;h4 id=&#34;onwidgettick&#34;&gt;onWidgetTick()
&lt;/h4&gt;&lt;p&gt;This is where the magic happens, all the data your widget need to get and then render to the screen is done here.&lt;br&gt;
Just like the above functions, I have created a separate function for each section so that it is more organised and easier for me to follow.&lt;/p&gt;
&lt;p&gt;The general process of the data fetching and updating goes as follows:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;If needed, clear the existing data from the DOM (remove from section)&lt;/li&gt;
&lt;li&gt;Call and get the data from the api endpoint.&lt;/li&gt;
&lt;li&gt;Once the data is received, map the data to an HTML object / snippets.&lt;/li&gt;
&lt;li&gt;Append or replace the data to the main HTML structure.&lt;/li&gt;
&lt;li&gt;When the next tick is met, repeat.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;onwidgetclose&#34;&gt;onWidgetClose()
&lt;/h4&gt;&lt;p&gt;The last function onWidgetClose() calls the onWidgetClose() function in r=the parent class. This does garbage collection and destructor things.&lt;/p&gt;
&lt;h2 id=&#34;explain-the-dangers-of-downloading-widgets&#34;&gt;Explain the dangers of downloading widgets
&lt;/h2&gt;&lt;p&gt;Be careful when downloading widgets, is basically any html and javascript can be run. So for example a abd actor
can have hidden fields on the code, for example &amp;ldquo;Address&amp;rdquo; and &amp;ldquo;Credit Card&amp;rdquo; details that your
browser could auto fill with saved data you have. I simple script can then auto send those details
to the bad actor.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>How To Install GNS3 On Linux - Debian based</title>
        <link>http://localhost:1313/post/-gns3-install-debian-27-09-2024/</link>
        <pubDate>Fri, 27 Sep 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/-gns3-install-debian-27-09-2024/</guid>
        <description>&lt;img src="http://localhost:1313/post/-gns3-install-debian-27-09-2024/splash.png" alt="Featured image of post How To Install GNS3 On Linux - Debian based" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/SE--UqXLShg&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&#34;introduction&#34;&gt;Introduction
&lt;/h2&gt;&lt;p&gt;We will follow most of the steps in the official Installation guide on GNS3&amp;rsquo;s website, however
during the installation and initial set up of GNS3.&lt;br&gt;
I ran into issues and errors, I will show you all the steps I went through to get GNS3 installed and running.&lt;/p&gt;
&lt;h2 id=&#34;installation&#34;&gt;Installation
&lt;/h2&gt;&lt;p&gt;The official installation guide for Linux can be found using the link below:
&lt;a class=&#34;link&#34; href=&#34;https://docs.gns3.com/docs/getting-started/installation/linux/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://docs.gns3.com/docs/getting-started/installation/linux/&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Refresh apt:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Install python and the required emulation &amp;amp; gui packages.&lt;br&gt;
When following the original guide, &amp;ldquo;dynamips&amp;rdquo; is not found.&lt;br&gt;
So in order to continue with the installation, we will remove
it from this step and install it manually in the next step.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo apt install python3 python3-pip pipx python3-pyqt5 python3-pyqt5.qtwebsockets python3-pyqt5.qtsvg qemu-kvm qemu-utils libvirt-clients libvirt-daemon-system virtinst  software-properties-common ca-certificates curl gnupg2 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;We will now install &amp;ldquo;dynamips&amp;rdquo;. First we need to download the dynamips package, then install it.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget http://ftp.us.debian.org/debian/pool/non-free/d/dynamips/dynamips_0.2.14-1_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;and then&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo dpkg -i dynamips_0.2.14-1_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Use pipx to install gns3:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;pipx install gns3-server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;pipx install gns3-gui
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We then add the &amp;ldquo;bin&amp;rdquo; directory to the &amp;ldquo;path&amp;rdquo; for the terminal to be able to find and run GNS3&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;pipx ensurepath
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;To launch the GUI, we will need to prepare the virtual environment. Inject the GNS server and QT elements:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;pipx inject gns3-gui gns3-server PyQt5
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;Close and then reopen your terminal. You can then type &amp;ldquo;gns3&amp;rdquo; in the terminal to start it.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;gns3
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;fixing-issues-and-errors&#34;&gt;Fixing Issues and Errors
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;The first issue I ran into is that I would get a &amp;ldquo;libvirt Not Installed / virbr0 Missing&amp;rdquo; error when trying to add a &amp;ldquo;cloud&amp;rdquo; or &amp;ldquo;NAT&amp;rdquo; node.&lt;br&gt;
To fix this issue run the following command:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo virsh net-start default
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;The next issue I ran into was GNS3 throwing out a &amp;ldquo;No VPCS Path&amp;rdquo; error.&lt;br&gt;
We will need to do the following steps to fix it.&lt;/p&gt;
&lt;p&gt;2.1  Install the library.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo apt install vpcs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After doing this, GNS3 would complain that there is a &amp;ldquo;Mismatch in the VPCS versions&amp;rdquo;.
In order to fix this, we now need to build the latest version of VPCS ourselves.&lt;/p&gt;
&lt;p&gt;2.2 First we need to download the source code from Github:
&lt;a class=&#34;link&#34; href=&#34;https://github.com/GNS3/vpcs/releases&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/GNS3/vpcs/releases&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Once downloaded, extract the &amp;ldquo;.zip&amp;rdquo; file and cd into the &amp;ldquo;src&amp;rdquo; folder&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; src
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;then run the following command to build the VPCS binary&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./mk.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Once it has completed the build. We will remove the old version of VPCS.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo rm /usr/bin/vpcs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then copy the new version to &amp;ldquo;/usr/bin/&amp;rdquo;. So for example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo cp /home/youtube/Downloads/vpcs-0.8.3/src/vpcs /usr/bin/vpcs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;That should be all the issues fixed. You can then run GNS3&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;gns3
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>OpnSense IPSec (Point to Point) connections (Policy based)</title>
        <link>http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/</link>
        <pubDate>Wed, 28 Aug 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/</guid>
        <description>&lt;img src="http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/lab.png" alt="Featured image of post OpnSense IPSec (Point to Point) connections (Policy based)" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/884RX3dKeek&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&#34;introduction&#34;&gt;Introduction
&lt;/h2&gt;&lt;p&gt;This is how to connect two instances together using an IPSec connection.
When setting up IPsec VPNs there are two main types of scenario’s with their own advantages and disadvantages. The two main types are:
Policy based
Route based (VTI)&lt;/p&gt;
&lt;p&gt;The main difference between the two is that the &amp;ldquo;VTI&amp;rdquo; method has the advantage that allows you to use standard or advanced routing technologies to forward traffic around tunnels.
The Policy based method is easier and quicker to setup, however has. less flexibility.&lt;/p&gt;
&lt;p&gt;This guide will focus on setting up a &amp;ldquo;Policy Based&amp;rdquo; connection.&lt;/p&gt;
&lt;h2 id=&#34;initial-setup&#34;&gt;Initial Setup
&lt;/h2&gt;&lt;p&gt;Each instance needs to have at least one unique LAN IP subnet for each side of your connection. If you use the same subnet on both instances, OpnSense will route the traffic to the local subnet and not to the other instance.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/lab.png&#34;
	width=&#34;1225&#34;
	height=&#34;449&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/lab_hu2027315016260625321.png 480w, http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/lab_hu13229781919297471284.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Network&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;272&#34;
		data-flex-basis=&#34;654px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;building-a&#34;&gt;Building A
&lt;/h3&gt;&lt;p&gt;Hostname: build1&lt;br&gt;
WAN IP: 158.10.10.2&lt;br&gt;
LAN Net: 192.168.10.0/24&lt;br&gt;
OPNSENSE IP: 192.168.10.1&lt;br&gt;
LAN DHCP Range: 192.168.10.100-192.168.10.200&lt;/p&gt;
&lt;h3 id=&#34;building-b&#34;&gt;Building B
&lt;/h3&gt;&lt;p&gt;Hostname: build1&lt;br&gt;
WAN IP: 164.20.20.2&lt;br&gt;
LAN Net: 192.168.20.0/24&lt;br&gt;
OPNSENSE IP: 192.168.20.1&lt;br&gt;
LAN DHCP Range: 192.168.20.100-192.168.20.200&lt;/p&gt;
&lt;h2 id=&#34;setup&#34;&gt;Setup
&lt;/h2&gt;&lt;h3 id=&#34;step-1---key-pairs&#34;&gt;Step 1 - Key pairs
&lt;/h3&gt;&lt;p&gt;Go to the VPN-&amp;gt;IPsec-&amp;gt;Key Pairs option in the menu and create a new key on both hosts, then copy the public part from Site A to Site B and vise versa. Keys may easily be generated with the gear button in the Key type field.&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Property&lt;/th&gt;
          &lt;th&gt;Name&lt;/th&gt;
          &lt;th&gt;Key Type&lt;/th&gt;
          &lt;th&gt;Generate&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;site A&lt;/td&gt;
          &lt;td&gt;B1&lt;/td&gt;
          &lt;td&gt;ECDSA - NIST P-384&lt;/td&gt;
          &lt;td&gt;Yes&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;site B&lt;/td&gt;
          &lt;td&gt;B2&lt;/td&gt;
          &lt;td&gt;ECDSA - NIST P-384&lt;/td&gt;
          &lt;td&gt;Yes&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Click on the &amp;ldquo;Gear&amp;rdquo; Icon to Generate a key.
Then using the Public Key Generated at each location From The Above:&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Property&lt;/th&gt;
          &lt;th&gt;Name&lt;/th&gt;
          &lt;th&gt;Key Type&lt;/th&gt;
          &lt;th&gt;Public Key&lt;/th&gt;
          &lt;th&gt;Private Key&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;site A&lt;/td&gt;
          &lt;td&gt;B2&lt;/td&gt;
          &lt;td&gt;ECDSA - NIST P-384&lt;/td&gt;
          &lt;td&gt;B2 Public Key&lt;/td&gt;
          &lt;td&gt;Blank&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;site B&lt;/td&gt;
          &lt;td&gt;B1&lt;/td&gt;
          &lt;td&gt;ECDSA - NIST P-384&lt;/td&gt;
          &lt;td&gt;B2 Public Key&lt;/td&gt;
          &lt;td&gt;Blank&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Click Save.&lt;/p&gt;
&lt;h3 id=&#34;step-2---setting-up-the-ipsec-connection&#34;&gt;Step 2 - Setting up the IPsec connection
&lt;/h3&gt;&lt;p&gt;In order to setup a simple (and common) IPsec connection, we go to&lt;br&gt;
VPN-&amp;gt;IPsec-&amp;gt;Connections and add a new entry.&lt;/p&gt;
&lt;h4 id=&#34;general-settings&#34;&gt;General settings
&lt;/h4&gt;&lt;p&gt;Side by side the following general settings need to be set in this case, which configures the first part of the security association between both sites:&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Property&lt;/th&gt;
          &lt;th&gt;Local addresses&lt;/th&gt;
          &lt;th&gt;Remote addresses&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;site A&lt;/td&gt;
          &lt;td&gt;158.10.10.2&lt;/td&gt;
          &lt;td&gt;164.20.20.2&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;site B&lt;/td&gt;
          &lt;td&gt;164.20.20.2&lt;/td&gt;
          &lt;td&gt;158.10.10.2&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Press &lt;!-- raw HTML omitted --&gt; to go to the next step.&lt;/p&gt;
&lt;h4 id=&#34;authentication&#34;&gt;Authentication
&lt;/h4&gt;&lt;p&gt;Next we will need to add local authentication (add a new record in the local grid):&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Property&lt;/th&gt;
          &lt;th&gt;Authentication&lt;/th&gt;
          &lt;th&gt;Id&lt;/th&gt;
          &lt;th&gt;Public Keys&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;site A&lt;/td&gt;
          &lt;td&gt;Public Key&lt;/td&gt;
          &lt;td&gt;hostA&lt;/td&gt;
          &lt;td&gt;hostA-key&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;site B&lt;/td&gt;
          &lt;td&gt;Public Key&lt;/td&gt;
          &lt;td&gt;hostB&lt;/td&gt;
          &lt;td&gt;hostB-key&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Then we need to set Pre-Shared Key for remote authentication as well:&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Property&lt;/th&gt;
          &lt;th&gt;Authentication&lt;/th&gt;
          &lt;th&gt;Id&lt;/th&gt;
          &lt;th&gt;Public Keys&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;site A&lt;/td&gt;
          &lt;td&gt;Public Key&lt;/td&gt;
          &lt;td&gt;hostB&lt;/td&gt;
          &lt;td&gt;hostB-key&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;site B&lt;/td&gt;
          &lt;td&gt;Public Key&lt;/td&gt;
          &lt;td&gt;hostA&lt;/td&gt;
          &lt;td&gt;hostA-key&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;children&#34;&gt;Children
&lt;/h4&gt;&lt;p&gt;Finally we may add a child which will add security policies and kernel routes.&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Property&lt;/th&gt;
          &lt;th&gt;Mode&lt;/th&gt;
          &lt;th&gt;Policies&lt;/th&gt;
          &lt;th&gt;Local&lt;/th&gt;
          &lt;th&gt;Remote&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;site A&lt;/td&gt;
          &lt;td&gt;Tunnel&lt;/td&gt;
          &lt;td&gt;checked&lt;/td&gt;
          &lt;td&gt;192.168.10.0/24&lt;/td&gt;
          &lt;td&gt;192.168.20.0/24&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;site B&lt;/td&gt;
          &lt;td&gt;Tunnel&lt;/td&gt;
          &lt;td&gt;checked&lt;/td&gt;
          &lt;td&gt;192.168.20.0/24&lt;/td&gt;
          &lt;td&gt;192.168.10.0/24&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Save and apply&lt;/p&gt;
&lt;p&gt;Finally save the settings and check the &amp;ldquo;IPSEC&amp;rdquo; checkbox. hit apply on the connections page to establish the tunnel.&lt;/p&gt;
&lt;h3 id=&#34;validate&#34;&gt;Validate
&lt;/h3&gt;&lt;p&gt;Now can check if the tunnel is active on both side using the status overview in&lt;br&gt;
VPN-&amp;gt;IPsec-&amp;gt;Status Overview&lt;/p&gt;
&lt;h3 id=&#34;install-firewall-policies&#34;&gt;Install firewall policies
&lt;/h3&gt;&lt;p&gt;With the tunnel active, all that remains is to accept traffic on this tunnel using the Firewall-&amp;gt;Rules-&amp;gt;IPsec menu option.&lt;/p&gt;
&lt;p&gt;In this guide I will just create a rule to allow all IPv4 traffic through, however in production you should only allow the traffic you want through. Do this for both buildings&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/IPsec-firewall.png&#34;
	width=&#34;1225&#34;
	height=&#34;311&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/IPsec-firewall_hu11644763356119648043.png 480w, http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/IPsec-firewall_hu12786124885753763759.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ALl Firewall&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;393&#34;
		data-flex-basis=&#34;945px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Then Add the following Wan Rules:
Firewall-&amp;gt;Rules-&amp;gt;WAN&lt;/p&gt;
&lt;p&gt;UDP  port 500&lt;br&gt;
UDP port 4500&lt;br&gt;
ESP&lt;/p&gt;
&lt;p&gt;Remember to set the source as the WAN IP from the opposite building.
So for building 1, The source will be building 2&amp;rsquo;s IP and vice versa.&lt;/p&gt;
&lt;p&gt;Building 1 rules  below:
&lt;img src=&#34;http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/B1-Firewall.png&#34;
	width=&#34;1225&#34;
	height=&#34;390&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/B1-Firewall_hu171733936677204025.png 480w, http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/B1-Firewall_hu15060267934171174378.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;B1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;314&#34;
		data-flex-basis=&#34;753px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Building 2 rules  below:
&lt;img src=&#34;http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/b2-Firewall.png&#34;
	width=&#34;1225&#34;
	height=&#34;325&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/b2-Firewall_hu10892015953603661278.png 480w, http://localhost:1313/post/opnsense-ipsec-point-to-point-connections-policy-based-28-08-2024/b2-Firewall_hu608228253813743153.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;B2&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;376&#34;
		data-flex-basis=&#34;904px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;extra-optionals&#34;&gt;Extra Optionals
&lt;/h2&gt;&lt;p&gt;See the original OpnSense Documents for more information:
&lt;a class=&#34;link&#34; href=&#34;https://docs.opnsense.org/manual/vpnet.html#ipsec&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://docs.opnsense.org/manual/vpnet.html#ipsec&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;tuning-considerations&#34;&gt;Tuning considerations
&lt;/h3&gt;&lt;p&gt;Depending on the workload (many different IPsec flows or a single flow), it might help to enable multithreaded crypto mode on ipsec, in which case cryptographic packets are dispatched to multiple processors (especially when only a single tunnel is being used).&lt;/p&gt;
&lt;p&gt;In order to do so, add or change the following tunable in System ‣ Settings ‣ Tunables:&lt;/p&gt;
&lt;p&gt;Note&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;net.inet.ipsec.async_crypto = 1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To distribute load better over available cores in the system, it may help to enable receive side scaling. In which case the following tunables need to be changed:&lt;/p&gt;
&lt;p&gt;Note&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;net.isr.bindthreads = 1&lt;/li&gt;
&lt;li&gt;net.isr.maxthreads = -1 &amp;lt;– equal the number of cores in the machine&lt;/li&gt;
&lt;li&gt;net.inet.rss.enabled = 1&lt;/li&gt;
&lt;li&gt;net.inet.rss.bits = X (The amount of cores, see below)
For rss bits use the following values:
for 2-core systems, use ‘1’
for 4-core systems, use ‘2’
for 8-core systems, use ‘3’
for 16-core systems, use ‘4’
Etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You will need to &lt;strong&gt;reboot&lt;/strong&gt; the OpnSense Instance for the settings to work.&lt;/p&gt;
&lt;h3 id=&#34;note-regarding-ips-and-rss&#34;&gt;Note regarding IPS and rss
&lt;/h3&gt;&lt;p&gt;When Suricata is running in IPS mode, Netmap is utilized to fetch packets off the line for inspection. By default, OPNsense has configured Suricata in such a way that the packet which has passed inspection will be re-injected into the host networking stack for routing/firewalling purposes. The current Suricata/Netmap implementation limits this re-injection to one thread only. Work is underway to address this issue since the new Netmap API (V14+) is now capable of increasing this thread count. Until then, no benefit is gained from RSS when using IPS.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Set up openDNS Service on OpnSense</title>
        <link>http://localhost:1313/post/opendns-on-opnsense-07-08-2024/</link>
        <pubDate>Wed, 07 Aug 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/opendns-on-opnsense-07-08-2024/</guid>
        <description>&lt;img src="http://localhost:1313/post/opendns-on-opnsense-07-08-2024/splash.jpg" alt="Featured image of post Set up openDNS Service on OpnSense" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/O1MT7G8DiB8&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

</description>
        </item>
        <item>
        <title>How to create a Windows, Linux and OpnSense node in EVE-NG</title>
        <link>http://localhost:1313/post/eve-ng-create-win-lin-op-nodes-16-07-2024/</link>
        <pubDate>Tue, 16 Jul 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/eve-ng-create-win-lin-op-nodes-16-07-2024/</guid>
        <description>&lt;img src="http://localhost:1313/post/eve-ng-create-win-lin-op-nodes-16-07-2024/splash.jpg" alt="Featured image of post How to create a Windows, Linux and OpnSense node in EVE-NG" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/sytxWt-j3lk&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&#34;intro&#34;&gt;Intro
&lt;/h2&gt;&lt;p&gt;In this guide we will create a Windows 10, OpnSense and a Debian 12 node.&lt;br&gt;
The official notes can be found on EVE-NG&amp;rsquo;s website:&lt;br&gt;
&lt;a class=&#34;link&#34; href=&#34;https://www.eve-ng.net/index.php/documentation/howtos/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.eve-ng.net/index.php/documentation/howtos/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;There are guides on how to add and create all available nodes on EVE-NG. So it is recommended to have a look at them in order for you to add the nodes you require.&lt;/p&gt;
&lt;h3 id=&#34;node-vm-creations&#34;&gt;Node VM Creations
&lt;/h3&gt;&lt;h4 id=&#34;download-the-isos&#34;&gt;Download the ISO&amp;rsquo;s
&lt;/h4&gt;&lt;p&gt;Download the desired ISO&amp;rsquo;s. In my case I have downloaded:&lt;br&gt;
OpnSense 24&lt;br&gt;
Windows 10 (64 bit)&lt;br&gt;
Debian 12 (net Installer)&lt;/p&gt;
&lt;h4 id=&#34;create-the-folders-on-eve-ng&#34;&gt;Create the folders on EVE-NG
&lt;/h4&gt;&lt;p&gt;SSH into the EVE-NG machine and create a folder in the:&lt;br&gt;
&lt;code&gt;bash /opt/unetlab/addons/qemu/&lt;/code&gt;&lt;br&gt;
folder&lt;br&gt;
For example I created the following:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir /opt/unetlab/addons/qemu/win-10x64Pro/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir /opt/unetlab/addons/qemu/linux-debian-12/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir /opt/unetlab/addons/qemu/opnsense-24/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;copy-the-isos-to-the-folders&#34;&gt;Copy the ISO&amp;rsquo;s to the folders
&lt;/h4&gt;&lt;p&gt;Next I will use &lt;code&gt;SCP&lt;/code&gt; to copy the ISO&amp;rsquo;s. from my downloads folder into the desired folder we have created for the VM&amp;rsquo;s.&lt;br&gt;
It is important that we name the ISO &lt;code&gt;cdrom.iso&lt;/code&gt; when we add it to the folder. Here are my &lt;code&gt;SCP&lt;/code&gt; commands&lt;/p&gt;
&lt;p&gt;OpnSense:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;scp /Users/jono/Downloads/OPNsense-24.1-dvd-amd64.iso root@10.0.0.9:/opt/unetlab/addons/qemu/opnsense-24/cdrom.iso
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Debian 12:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;scp /Users/jono/Downloads/debian-12.6.0-amd64-netinst.iso root@10.0.0.9:/opt/unetlab/addons/qemu/linux-debian-12/cdrom.iso
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Windows 10:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;scp /Users/jono/Downloads/Win10_22H2_EnglishInternational_x64v1.iso root@10.0.0.9:/opt/unetlab/addons/qemu/win-10x64Pro/cdrom.iso
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;create-the-virtual-disks-hdds-for-the-vms&#34;&gt;Create The Virtual Disks (HDD&amp;rsquo;s) for the VM&amp;rsquo;s
&lt;/h4&gt;&lt;p&gt;Next we need to create the virtual disks for each VM / Node to use.&lt;br&gt;
SSH into the EVE-NG again and do the following:&lt;/p&gt;
&lt;p&gt;OpnSense:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/unetlab/addons/qemu/opnsense-24/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/opt/qemu/bin/qemu-img create -f qcow2 virtioa.qcow2 10G
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Debian 12:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/unetlab/addons/qemu/linux-debian-12/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/opt/qemu/bin/qemu-img create -f qcow2 virtioa.qcow2 30G
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Windows 10:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/unetlab/addons/qemu/win-10x64Pro/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/opt/qemu/bin/qemu-img create -f qcow2 virtioa.qcow2 60G
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;installing-the-oses-on-the-vms--nodes&#34;&gt;Installing the OSes on the VMs / Nodes
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;Log In to EVE-NG Using the &amp;ldquo;HTML 5&amp;rdquo; session.&lt;/li&gt;
&lt;li&gt;Create a new lab and add the newly created nodes.&lt;/li&gt;
&lt;li&gt;Connect the node to your home LAN cloud/internet in order for it to be able to get updates and fully install from the internet. However, do not add the Windows 10 node to the internet, this will just quickly allow us to bypass the &amp;ldquo;Online Microsoft Account&amp;rdquo; link stage.&lt;/li&gt;
&lt;li&gt;start each node and complete the installation of. the OSes.&lt;/li&gt;
&lt;li&gt;Once completed, Shutdown and stop each node.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;commit-vms&#34;&gt;Commit VM&amp;rsquo;s
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Check lab ID number on EVE side bar “Lab details” and we need to also get the &amp;ldquo;Node Number&amp;rdquo;. number of each node which can be seen in the &amp;ldquo;Nodes&amp;rdquo; List&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SSH into the EVE-NG machine and &lt;code&gt;cd&lt;/code&gt; into the labs folder.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/unetlab/tmp/0/the-lab-id-here/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;We will go into the nodes one by one and convert the temp VM to be the &amp;ldquo;main&amp;rdquo; vm for all future nodes of that type. For example&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/unetlab/tmp/0/the-lab-id-here/0/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;qemu-img commit virtioa.qcow2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/unetlab/tmp/0/the-lab-id-here/1/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;qemu-img commit virtioa.qcow2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/unetlab/tmp/0/the-lab-id-here/2/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;qemu-img commit virtioa.qcow2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;removes-isos-from-the-machine&#34;&gt;Removes ISO&amp;rsquo;s from the machine
&lt;/h4&gt;&lt;p&gt;Now we need to &lt;code&gt;cd&lt;/code&gt; into each the VM folders again and remove the ISO images.&lt;/p&gt;
&lt;p&gt;OpnSense:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/unetlab/addons/qemu/opnsense-24/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rm -f cdrom.iso
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Debian 12:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/unetlab/addons/qemu/linux-debian-12/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rm -f cdrom.iso
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Windows 10:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/unetlab/addons/qemu/win-10x64Pro/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rm -f cdrom.iso
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;fix-file-permissions&#34;&gt;Fix file Permissions
&lt;/h4&gt;&lt;p&gt;lastly we need to run the following to fix any permission issues&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/opt/unetlab/wrappers/unl_wrapper -a fixpermissions
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;optional---compress-the-vms-hdds&#34;&gt;Optional - Compress the VM&amp;rsquo;s HDD&amp;rsquo;s
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;You can &lt;code&gt;cd&lt;/code&gt; into each VM&amp;rsquo;s folder again and sparsify the virtual disk to compress the them, for example to compress the windows 10 VM we will do the following:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/unetlab/addons/qemu/win-10x64Pro/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;virt-sparsify  --compress virtioa.qcow2 compressedvirtioa.qcow2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This will take some time and another compressed image will be created in the same image directory&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Rename the original image to virtioa-o.qcow2:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mv virtioa.qcow2 virtioa-o.qcow2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Rename the compressed image name to virtioa.qcow2:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mv compressedvirtioa.qcow2 virtioa.qcow2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;now you can test your new compressed image on a lab, just wipe the node and start it.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If the compressed node works fine, you can delete your original source image:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rm -f. virtioa-o.qcow2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Please note&lt;/strong&gt;
I tried to compress windows 10 and when using it, it would not boot correctly. I attempted this twice and had issues. So I reverted to use the original virtual disk.&lt;/p&gt;
&lt;h2 id=&#34;webui-access-method&#34;&gt;WebUI Access Method
&lt;/h2&gt;&lt;h3 id=&#34;to-setup-opnsense-web-ui-from-wan&#34;&gt;To setup OpnSense web UI from wan
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;in shell on opnsense: &lt;code&gt;pfctl -d&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;You ca now access GUI via WAN IP&lt;/li&gt;
&lt;li&gt;disable the &amp;ldquo;Block bogon&amp;rdquo; traffic:
&lt;ol&gt;
&lt;li&gt;interfaces-&amp;gt;WAN &amp;ldquo;Untick&amp;rdquo; both &amp;ldquo;block private networks&amp;rdquo; and block &amp;ldquo;Bogon Networks&amp;rdquo;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;I would also go to Firewall &amp;gt; Settings &amp;gt; Advanced and check &amp;ldquo;Disable anti-lockout&amp;rdquo;.&lt;/li&gt;
&lt;li&gt;Firewall &amp;ndash;&amp;gt; Settings&amp;ndash;&amp;gt; Advanced &amp;ldquo;Disable reply-to on WAN rules&amp;rdquo;&lt;/li&gt;
&lt;li&gt;create the following Firewall rule.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Firewall &amp;gt; Rules &amp;gt; WAN

Click on the &amp;#34;+&amp;#34; to add a rule. Add this rule:

Action: allow
Source: any
Destination: This Firewall
Destination port: 443
&lt;/code&gt;&lt;/pre&gt;</description>
        </item>
        <item>
        <title>How to install EVE-NG on Proxmox</title>
        <link>http://localhost:1313/post/eve-ng-proxmox-12-07-2024/</link>
        <pubDate>Mon, 15 Jul 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/eve-ng-proxmox-12-07-2024/</guid>
        <description>&lt;img src="http://localhost:1313/post/eve-ng-proxmox-12-07-2024/splash.jpg" alt="Featured image of post How to install EVE-NG on Proxmox" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/IEMYJscrykI&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&#34;introduction&#34;&gt;Introduction
&lt;/h2&gt;&lt;p&gt;Hi there, Jono here, on a regular basis, I need to test &amp;ldquo;Use Cases&amp;rdquo;, Software configurations and network setups for customers. I also wanted to start working on guides showing more advanced setups that would require multiple servers, networking equipment and cable which can be problematic, both in terms of cost and physical space.
So I was thinking about how I could use my single home lab server to better achieve this &amp;ldquo;juggling&amp;rdquo; of tasks and that was when it hit me.&lt;/p&gt;
&lt;p&gt;Why not use Eve-ng or GNS3?&lt;/p&gt;
&lt;p&gt;Eve-ng or &amp;ldquo;emulated virtual environments, next generation&amp;rdquo; and GNS3 or &amp;ldquo;Graphical Network Simulator - 3&amp;rdquo; are in a sense &amp;ldquo;hypervisors&amp;rdquo; which allow you to create virtual machines or containers, which in Eve-ng are called &amp;ldquo;nodes&amp;rdquo; and in &amp;ldquo;GNS3&amp;rdquo; are called &amp;ldquo;Appliances&amp;rdquo;. These. are then used in a &amp;ldquo;drag and drop&amp;rdquo; fashion where you quickly and easily create virtual networks which can then be used. in real world deployment.&lt;/p&gt;
&lt;p&gt;In the past, I never really owned a device that was powerful enough to run these tools, but. now-a-days, hardware. has become so powerful, you can run these tools on relatively cheap laptops and PC&amp;rsquo;s.&lt;/p&gt;
&lt;p&gt;Since it has been so long since I have tried them, I will be giving them both a try again. In this guide I will be using Eve-ng&amp;rsquo;s community edition, and will do a few &amp;ldquo;labs&amp;rdquo; in it to give it a fair test. In future guides I will move over to GNS3 and after giving that a good test, I will make a video on my experiences.&lt;/p&gt;
&lt;p&gt;Now lets move onto the meat of this guide,  and that is how to install Eve-ng on a virtual machine in Proxmox.&lt;/p&gt;
&lt;h2 id=&#34;installation&#34;&gt;Installation
&lt;/h2&gt;&lt;h3 id=&#34;download-the-iso&#34;&gt;Download the ISO
&lt;/h3&gt;&lt;p&gt;Download the community edition from:
&lt;a class=&#34;link&#34; href=&#34;https://www.eve-ng.net/index.php/download/#DL-COMM&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.eve-ng.net/index.php/download/#DL-COMM&lt;/a&gt;
and upload it to Proxmox&lt;/p&gt;
&lt;h3 id=&#34;enable-nested-virtualisation&#34;&gt;Enable Nested Virtualisation
&lt;/h3&gt;&lt;p&gt;Nested virtualisation allows you to run a hypervisor within a virtual machine, which is how these tools work, we need to check that is is enabled on Proxmox. If I remember correctly,  it used to be disabled by default, however, will all my new Proxmox installations, It appears that it is now enabled by default&lt;/p&gt;
&lt;p&gt;Using SSH or using Proxmox&amp;rsquo;s built in shell:
// For Intel&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cat /sys/module/kvm_intel/parameters/nested
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;// For AMD&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cat /sys/module/kvm_amd/parameters/nested
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;It will either show a &amp;ldquo;Y&amp;rdquo; or &amp;ldquo;N&amp;rdquo;. &amp;ldquo;Y&amp;rdquo; to indicate if it is enabled or &amp;ldquo;N&amp;rdquo; if not.&lt;/p&gt;
&lt;p&gt;To enable nested virtualisation you just have to do a few simple things, I’d suggest to follow the official article,
&lt;a class=&#34;link&#34; href=&#34;https://pve.proxmox.com/wiki/Nested_Virtualization&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://pve.proxmox.com/wiki/Nested_Virtualization&lt;/a&gt;
incase this changes in the future, but as of today, you can use this quick rundown to get up and running:&lt;/p&gt;
&lt;p&gt;// For Intel&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;options kvm-intel nested=Y&amp;#34;&lt;/span&gt; &amp;gt; /etc/modprobe.d/kvm-intel.conf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;// For AMD&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;options kvm-amd nested=1&amp;#34;&lt;/span&gt; &amp;gt; /etc/modprobe.d/kvm-amd.conf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Reboot or reload the kernel module&lt;/p&gt;
&lt;p&gt;// For Intel&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;modprobe -r kvm_intel
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;modprobe kvm_intel
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;// For AMD&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;modprobe -r kvm_amd
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;modprobe kvm_amd
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It is recommend to do a full reboot.
After the reboot, check if the module is enabled.&lt;/p&gt;
&lt;h3 id=&#34;create-the-virtual-machine&#34;&gt;Create the Virtual Machine
&lt;/h3&gt;&lt;p&gt;Create a Virtual machine with the following:
100GB Disk Space (More the merrier)
+- 4GB RAM (More the merrier)
CPU set to &amp;ldquo;Host&amp;rdquo; (This is a must)
Make sure to attach the Eve-ng ISO
Attach it to a network that has internet access (This is a must)
the rest is up to you.&lt;/p&gt;
&lt;p&gt;Just a quick notice, that in the video I set the HDD to use &amp;ldquo;VirtIO&amp;rdquo; in stead of &amp;ldquo;SCSI&amp;rdquo; as a saw a few people mention that they where getting better results. However I have not tested this claim myself. It is up to you to decide what you would like to use.&lt;/p&gt;
&lt;h3 id=&#34;eve-ng-installation&#34;&gt;Eve-ng installation
&lt;/h3&gt;&lt;p&gt;Eve-ng uses &amp;ldquo;cloud-init&amp;rdquo; to do a lot of the installation. So depending o the speed of your internet, this process can take a long time.
once it is. completed, you will be presented with the configuration phase where you will be guided through configuring your instance.&lt;/p&gt;
&lt;p&gt;In this case I have set the IP to be 10.0.0.9&lt;/p&gt;
&lt;h3 id=&#34;access-the-web-ui&#34;&gt;Access the Web UI
&lt;/h3&gt;&lt;p&gt;once the installation is completed. You can goto the the instance IP in your favourite browser to access the Web UI.
The default login details are:
admin
eve&lt;/p&gt;
&lt;h3 id=&#34;reconfigure-your-instance&#34;&gt;Reconfigure your Instance
&lt;/h3&gt;&lt;p&gt;If. you have made a mistake during the &amp;ldquo;Configuration&amp;rdquo; stage. You can do the following to run it again.&lt;/p&gt;
&lt;p&gt;SSH into it or directly via the console.&lt;/p&gt;
&lt;p&gt;Delete the &amp;ldquo;Configured&amp;rdquo; file&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;rm -f /opt/ovf/.configured
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;and then&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;su -
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This will rerun the configuration stage.&lt;/p&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion
&lt;/h2&gt;&lt;p&gt;You will now have an Eve-ng Vm up and running, almost ready to use. All that is left is to create &amp;ldquo;nodes&amp;rdquo; that we can use.
In the next guide, we will create an OpnSense &amp;ldquo;node&amp;rdquo; and I will show you the method I used to get access to the OpnSense WebUI of that &amp;ldquo;node&amp;rdquo; in order to use and configure it.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Protect OpnSense with 2FA</title>
        <link>http://localhost:1313/post/protect-opnsense-with-2fa-14-06-2024/</link>
        <pubDate>Fri, 14 Jun 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/protect-opnsense-with-2fa-14-06-2024/</guid>
        <description>&lt;img src="http://localhost:1313/post/protect-opnsense-with-2fa-14-06-2024/splash.jpg" alt="Featured image of post Protect OpnSense with 2FA" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/jQqRtnREJ5s&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

</description>
        </item>
        <item>
        <title>Multi WAN Uptime Monitoring</title>
        <link>http://localhost:1313/post/multi-wan-uptime-monitoring/</link>
        <pubDate>Fri, 31 May 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/multi-wan-uptime-monitoring/</guid>
        <description>&lt;img src="http://localhost:1313/post/multi-wan-uptime-monitoring/splash.jpg" alt="Featured image of post Multi WAN Uptime Monitoring" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/ouDQKa596hU&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&#34;concept-and-design&#34;&gt;Concept and design
&lt;/h2&gt;&lt;p&gt;In a previous video I made going over the different Multi WAN modes.
I spoke about how you could route traffic over different WAN connections to create a form of load balancing.
We can use that same concept for monitoring multiple WAN connections from a single monitoring application.&lt;/p&gt;
&lt;p&gt;In this guide, I will be using a monitoring application called &amp;ldquo;Uptime Kuma&amp;rdquo; mainly
due to it being quick to install and extremely simple to setup. However this method will work for any monitoring software that uses a ping (ICMP) to monitor a devices presence.&lt;/p&gt;
&lt;h2 id=&#34;installation&#34;&gt;Installation
&lt;/h2&gt;&lt;p&gt;I have created an Ubuntu server VM that is on the &amp;ldquo;Management&amp;rdquo; network.
I have given it a static IP of ```10.0.0.3&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-,&#34; data-lang=&#34;,&#34;&gt;From there I have created an &amp;#34;Uptime Kuma&amp;#34; container that is ready to go.

I simply create a folder in my users home folder called ```docker```
and then created a folder in there called ```kuma```

In the ```kuma``` folder, I then created a file in there called ```docker-compose.yml``` and a folder called ```data```. That is where all the data Uptime Kuma needs to store will go.


Below is the docker-compose.yml file I used to get it running:

``` YML 
version: &amp;#39;3.3&amp;#39;

services:
  uptime-kuma:
    image: louislam/uptime-kuma:1
    container_name: uptime-kuma
    volumes:
      - ./data:/app/data
      - /var/run/docker.sock:/var/run/docker.sock:ro
    ports:
      - 3001:3001  # &amp;lt;Host Port&amp;gt;:&amp;lt;Container Port&amp;gt;
    restart: always
    
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Once done, we can simply run the following:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo docker-compose up -d
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;That will create and start the container.&lt;/p&gt;
&lt;h2 id=&#34;create-the-monitors&#34;&gt;Create the monitors
&lt;/h2&gt;&lt;p&gt;Once Uptime Kuma is up and running, we can goto:
&lt;code&gt;http://&amp;lt;your.servser.IP&amp;gt;:3001&lt;/code&gt;
in your web browser of choice and we can create the following monitors. Change the &lt;code&gt;&amp;lt;your.servser.IP&amp;gt;&lt;/code&gt; to the IP of your server.&lt;/p&gt;
&lt;p&gt;For this guide, we will create three monitors.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;For the first WAN, we will call it Fibre&lt;/li&gt;
&lt;li&gt;For the second WAN, we will call it 5G&lt;/li&gt;
&lt;li&gt;For the VPN, we will call it VPN&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;create-a-monitor&#34;&gt;Create a monitor
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Click on the &lt;code&gt;+ Add New Monitor&lt;/code&gt; button on the top left to start creating a new monitor.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use the following:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Monitor Type: ping
Friendly Name: &amp;#34;Fibre&amp;#34;
Hostname: 8.8.8.8
Heartbeat Interval: 60 
Retries: 2
Heartbeat Retry Interval: 20
Description: &amp;#34;Fibre WAN Uptime&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;
&lt;p&gt;Click the &lt;code&gt;save&lt;/code&gt; button at the bottom to add the monitor.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Now repeat this two more times, using the following:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Monitor Type: ping
Friendly Name: &amp;#34;5G&amp;#34;
Hostname: 1.1.1.1
Heartbeat Interval: 60 
Retries: 2
Heartbeat Retry Interval: 20
Description: &amp;#34;5G WAN Uptime&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Monitor Type: ping
Friendly Name: &amp;#34;VPN&amp;#34;
Hostname: 9.9.9.9
Heartbeat Interval: 60 
Retries: 2
Heartbeat Retry Interval: 20
Description: &amp;#34;VPN Uptime&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;test-that-the-monitors-work&#34;&gt;Test that the monitors work
&lt;/h2&gt;&lt;p&gt;Now since  the server is on the &amp;ldquo;Management&amp;rdquo; network. The pings will most probably use the default WAN mode that you have set for that network. So in this instance it is on a &amp;ldquo;failover&amp;rdquo; WAN group that uses the &amp;ldquo;Fibre&amp;rdquo; WAN first and the &amp;ldquo;5G&amp;rdquo; WAN as the failover.&lt;/p&gt;
&lt;p&gt;So if we  unplug the &amp;ldquo;Fibre&amp;rdquo; connection, we should see that all the connections will be marked as down for a few moments, until the failover kicks in.&lt;/p&gt;
&lt;p&gt;This will let us know that the monitor are working, however we want to have the monitors monitor the desired individual WAN connections.&lt;/p&gt;
&lt;p&gt;We will do that on our Firewall by creating rules in order to route the pings through the correct WAN connection / Gateways.&lt;/p&gt;
&lt;h2 id=&#34;firewall-rules&#34;&gt;Firewall rules.
&lt;/h2&gt;&lt;p&gt;This is not an &amp;ldquo;OpnSense&amp;rdquo; specific feature.
This will work with any firewall where you have the ability to create detailed firewall rules. You will just need to consult the user manual for that firewall in order to see how to create custom rules.&lt;/p&gt;
&lt;p&gt;However, in this guide I will use OpnSense as my firewall.&lt;/p&gt;
&lt;h3 id=&#34;firewall-rule-concept&#34;&gt;Firewall rule concept
&lt;/h3&gt;&lt;p&gt;The rule will allow &lt;code&gt;ICMP&lt;/code&gt; traffic to &lt;code&gt;Pass&lt;/code&gt; from the server with IP &lt;code&gt;&amp;lt;your.server.IP&amp;gt;&lt;/code&gt; through a specific &lt;code&gt;Gateway&lt;/code&gt; depending on the &lt;code&gt;destination IP&lt;/code&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Login to your Firewall.&lt;/li&gt;
&lt;li&gt;In OpnSens, I will go to the &amp;ldquo;Management&amp;rdquo; network in the &amp;ldquo;Rules&amp;rdquo; section and create a new rule.&lt;/li&gt;
&lt;li&gt;Use the following but change it to suit your setup.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Action: Pass
Interface: &amp;lt;Your Network Name&amp;gt;
Direction: in
TCP/IP Version: IPv4
Protocol: ICMP
ICMP Type: any
Source:  Single host or Network
&amp;lt;your.server.ip&amp;gt; / 32
Destination:  Single host or Network
&amp;lt;ping.to.ip&amp;gt; / 32
Log: enabled (Optional)
Description: Ping for Fibre Monitoring
Gateway: &amp;lt;Your Desired WAN Connection&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So for this guide / my network it will be the following:&lt;/p&gt;
&lt;p&gt;Fibre Uptime Monitoring:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Action: Pass
Interface: Management
Direction: in
TCP/IP Version: IPv4
Protocol: ICMP
ICMP Type: any
Source:  Single host or Network
&amp;lt;your.server.ip&amp;gt; / 32
Destination:  Single host or Network
8.8.8.8 / 32
Log: enabled (Optional)
Description: Ping for Fibre Monitoring
Gateway: &amp;lt;Your Desired WAN Connection&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;5G Uptime Monitoring:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Action: Pass
Interface: Management
Direction: in
TCP/IP Version: IPv4
Protocol: ICMP
ICMP Type: any
Source:  Single host or Network
&amp;lt;your.server.ip&amp;gt; / 32
Destination:  Single host or Network
1.1.1.1 / 32
Log: enabled (Optional)
Description: Ping for 5G Monitoring
Gateway: &amp;lt;Your Desired WAN Connection&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;VPN Uptime Monitoring:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Action: Pass
Interface: Management
Direction: in
TCP/IP Version: IPv4
Protocol: ICMP
ICMP Type: any
Source:  Single host or Network
&amp;lt;your.server.ip&amp;gt; / 32
Destination:  Single host or Network
9.9.9.9 / 32
Log: enabled (Optional)
Description: Ping for VPN Monitoring
Gateway: &amp;lt;Your Desired WAN Connection&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;With those rules created and applied, we can test again and we should now get the desired results.&lt;/p&gt;
&lt;h2 id=&#34;test-that-the-monitors-work-individually&#34;&gt;Test that the monitors work individually
&lt;/h2&gt;&lt;p&gt;If we now unplug the first WAN connection in this case the &amp;ldquo;Fibre&amp;rdquo; WAN. We will see that only the &amp;ldquo;Fibre&amp;rdquo; monitor will show as &amp;ldquo;down&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;If the &amp;ldquo;VPN&amp;rdquo; connection was connected on the &amp;ldquo;Fibre&amp;rdquo; WAN, that too will show as &amp;ldquo;down&amp;rdquo; until it reconnects to the next WAn connection.&lt;/p&gt;
&lt;p&gt;If we plug  it back in, the monitor will return to &amp;ldquo;UP&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;You can now do this test on the &amp;ldquo;5G&amp;rdquo; WAN and you should get the expected results.&lt;/p&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion
&lt;/h2&gt;&lt;p&gt;This was a quick guide showing you how to monitor multiple WANs / Gateways using a single instance of your monitoring software.
The power of firewall rules helps you achieve this setup and is a very quick and flexible option that doesn&amp;rsquo;t require complicated network setups.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Setup Surfshark OpenVPN Client on OpnSense</title>
        <link>http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/</link>
        <pubDate>Fri, 22 Mar 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/</guid>
        <description>&lt;img src="http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/splash.jpg" alt="Featured image of post Setup Surfshark OpenVPN Client on OpnSense" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/KNFyR6Dki4A&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&#34;intro&#34;&gt;Intro
&lt;/h2&gt;&lt;p&gt;In this guide we will setup up a VPN client on OpnSense, this will allow us to create a gateway that we can use
for all traffic we would like to use through a VPN. A common use is to route all IOT devices through the VPN
connection so that our &amp;ldquo;real&amp;rdquo; public IP address can not be seen by these kind of devices.&lt;/p&gt;
&lt;p&gt;Setting up a Client VPN requires four main steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Add VPN server as a &amp;ldquo;Certificate Authority&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Create the VPN Client&lt;/li&gt;
&lt;li&gt;Assign and Enable the interface&lt;/li&gt;
&lt;li&gt;Set up the outbound firewall rules&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I have decided to use Surfshark as my VPN service since I have been using them for years, however you can do this with any OpnVPN provider (AirVPN for example).
I would recommend that you double check the providers support / manuals for their recommended settings,
but this guide will give you a starting point on how to get started.&lt;/p&gt;
&lt;p&gt;A Full guide by Shurfshark can be found here:
&lt;a class=&#34;link&#34; href=&#34;https://support.surfshark.com/hc/en-us/articles/12434921071890-How-to-set-up-Surfshark-on-an-OPNsense-router&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://support.surfshark.com/hc/en-us/articles/12434921071890-How-to-set-up-Surfshark-on-an-OPNsense-router&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;However a lot of steps that are incorrect in their guide and do not work for my setup, the DNS steps in particular.
This guide is the steps that I used to set this all up.&lt;/p&gt;
&lt;p&gt;If you are interested in using Surfshark, you can use my affiliate link:
&lt;a class=&#34;link&#34; href=&#34;https://surfshark.club/friend/7p3dwxCf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://surfshark.club/friend/7p3dwxCf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For more information about the referral program:
&lt;a class=&#34;link&#34; href=&#34;https://surfshark.com/refer-a-friend&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://surfshark.com/refer-a-friend&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;get-your-surfshark-credentials-and-server-location&#34;&gt;Get your Surfshark credentials and server location
&lt;/h2&gt;&lt;p&gt;Login to your Surfshark account and go to the following link to get your credentials and to see a list of VPN server locations you can connect to:
&lt;a class=&#34;link&#34; href=&#34;https://my.surfshark.com/vpn/manual-setup/main/openvpn&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://my.surfshark.com/vpn/manual-setup/main/openvpn&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;add-surfshark-to-our-certificate-authority&#34;&gt;Add Surfshark to our &amp;ldquo;Certificate Authority&amp;rdquo;
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Navigate to System &amp;gt; Trust &amp;gt; Authorities and click on the +Add button. Once there, you should be able to see the window below:
&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/1.jpg&#34;
	width=&#34;759&#34;
	height=&#34;767&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/1_hu3553713531074810186.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/1_hu1452018674082550893.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Authorities&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;98&#34;
		data-flex-basis=&#34;237px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Give it a &amp;ldquo;Descriptive Name&amp;rdquo;, in this case I will call it &lt;code&gt;SurfShark_Auth&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Copy and paste the following Certificate data in to the &amp;ldquo;Certificate Data&amp;rdquo; field&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-----BEGIN CERTIFICATE-----
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;MIIFTTCCAzWgAwIBAgIJAMs9S3fqwv+mMA0GCSqGSIb3DQEBCwUAMD0xCzAJBgNV
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;BAYTAlZHMRIwEAYDVQQKDAlTdXJmc2hhcmsxGjAYBgNVBAMMEVN1cmZzaGFyayBS
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;b290IENBMB4XDTE4MDMxNDA4NTkyM1oXDTI4MDMxMTA4NTkyM1owPTELMAkGA1UE
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;BhMCVkcxEjAQBgNVBAoMCVN1cmZzaGFyazEaMBgGA1UEAwwRU3VyZnNoYXJrIFJv
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;b3QgQ0EwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDEGMNj0aisM63o
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;SkmVJyZPaYX7aPsZtzsxo6m6p5Wta3MGASoryRsBuRaH6VVa0fwbI1nw5ubyxkua
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Na4v3zHVwuSq6F1p8S811+1YP1av+jqDcMyojH0ujZSHIcb/i5LtaHNXBQ3qN48C
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;c7sqBnTIIFpmb5HthQ/4pW+a82b1guM5dZHsh7q+LKQDIGmvtMtO1+NEnmj81BAp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;FayiaD1ggvwDI4x7o/Y3ksfWSCHnqXGyqzSFLh8QuQrTmWUm84YHGFxoI1/8AKdI
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yVoB6BjcaMKtKs/pbctk6vkzmYf0XmGovDKPQF6MwUekchLjB5gSBNnptSQ9kNgn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;TLqi0OpSwI6ixX52Ksva6UM8P01ZIhWZ6ua/T/tArgODy5JZMW+pQ1A6L0b7egIe
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ghpwKnPRG+5CzgO0J5UE6gv000mqbmC3CbiS8xi2xuNgruAyY2hUOoV9/BuBev8t
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tE5ZCsJH3YlG6NtbZ9hPc61GiBSx8NJnX5QHyCnfic/X87eST/amZsZCAOJ5v4EP
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;SaKrItt+HrEFWZQIq4fJmHJNNbYvWzCE08AL+5/6Z+lxb/Bm3dapx2zdit3x2e+m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;iGHekuiE8lQWD0rXD4+T+nDRi3X+kyt8Ex/8qRiUfrisrSHFzVMRungIMGdO9O/z
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;CINFrb7wahm4PqU2f12Z9TRCOTXciQIDAQABo1AwTjAdBgNVHQ4EFgQUYRpbQwyD
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ahLMN3F2ony3+UqOYOgwHwYDVR0jBBgwFoAUYRpbQwyDahLMN3F2ony3+UqOYOgw
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;DAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAgEAn9zV7F/XVnFNZhHFrt0Z
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;S1Yqz+qM9CojLmiyblMFh0p7t+Hh+VKVgMwrz0LwDH4UsOosXA28eJPmech6/bjf
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ymkoXISy/NUSTFpUChGO9RabGGxJsT4dugOw9MPaIVZffny4qYOc/rXDXDSfF2b+
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;303lLPI43y9qoe0oyZ1vtk/UKG75FkWfFUogGNbpOkuz+et5Y0aIEiyg0yh6/l5Q
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;5h8+yom0HZnREHhqieGbkaGKLkyu7zQ4D4tRK/mBhd8nv+09GtPEG+D5LPbabFVx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;KjBMP4Vp24WuSUOqcGSsURHevawPVBfgmsxf1UCjelaIwngdh6WfNCRXa5QQPQTK
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ubQvkvXONCDdhmdXQccnRX1nJWhPYi0onffvjsWUfztRypsKzX4dvM9k7xnIcGSG
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;EnCC4RCgt1UiZIj7frcCMssbA6vJ9naM0s7JF7N3VKeHJtqe1OCRHMYnWUZt9vrq
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;X6IoIHlZCoLlv39wFW9QNxelcAOCVbD+19MZ0ZXt7LitjIqe7yF5WxDQN4xru087
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;FzQ4Hfj7eH1SNLLyKZkA1eecjmRoi/OoqAt7afSnwtQLtMUc2bQDg6rHt5C0e4dC
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;LqP/9PGZTSJiwmtRHJ/N5qYWIh9ju83APvLm/AGBTR2pXmj9G3KdVOkpIC7L35dI
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;623cSEC3Q3UZutsEm/UplsM&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-----END CERTIFICATE-----
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/2.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;1151&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/2_hu14492539935455797307.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/2_hu13059107697829626633.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Authorities completed&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;130&#34;
		data-flex-basis=&#34;312px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Save the certificate. You will see that the certificate is valid until 2028 from Surfshark.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/3.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;1151&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/3_hu9118506637331810297.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/3_hu17564097419615077343.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Authorities cert&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;130&#34;
		data-flex-basis=&#34;312px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;creating-the-client-connection&#34;&gt;Creating the client connection
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Navigate to VPN &amp;gt; OpenVPN &amp;gt; Clients (Legacy) and click on the +Add button. Once there, you should be able to see the window below:
&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/4.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;794&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/4_hu4490366144367497729.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/4_hu6619919750523265740.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Client&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;188&#34;
		data-flex-basis=&#34;453px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Fill in the following:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Description: Any name you like, for example, &lt;code&gt;ShurfShark_UK&lt;/code&gt;&lt;br&gt;
Server mode: Peer to Peer (SSL/TLS);&lt;br&gt;
Protocol: UDP (you can also use UDP4);&lt;br&gt;
Device mode: tun&lt;br&gt;
Interface: any&lt;br&gt;
Remote server:
Host or address: &lt;code&gt;uk-lon.prod.surfshark.com&lt;/code&gt; (change to the hostname of the server you are going to use chosen from the &amp;ldquo;Get your Surfshark credentials and server location&amp;rdquo; section)&lt;br&gt;
Port: 1194&lt;/p&gt;
&lt;p&gt;Retry DNS resolution: UnCheck&lt;br&gt;
Proxy host or address: Leave blank&lt;br&gt;
Proxy port: Leave blank&lt;br&gt;
Proxy Authentication: None&lt;/p&gt;
&lt;p&gt;USER AUTHENTICATION SETTINGS&lt;br&gt;
Username/Password: fill in your Surfshark Credentials from &amp;ldquo;Get your Surfshark credentials and server location&amp;rdquo; section&lt;/p&gt;
&lt;p&gt;CRYPTOGRAPHIC SETTINGS:&lt;br&gt;
TLS Authentication: Enabled – Authentication only&lt;br&gt;
TLS Shared Key: Paste the contents below&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-----BEGIN OpenVPN Static key V1-----
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;b02cb1d7c6fee5d4f89b8de72b51a8d0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;c7b282631d6fc19be1df6ebae9e2779e
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;6d9f097058a31c97f57f0c35526a44ae
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;09a01d1284b50b954d9246725a1ead1f
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;f224a102ed9ab3da0152a15525643b2e
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ee226c37041dc55539d475183b889a10
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;e18bb94f079a4a49888da566b9978346
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0ece01daaf93548beea6c827d9674897
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;e7279ff1a19cb092659e8c1860fbad0d
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;b4ad0ad5732f1af4655dbd66214e552f
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;04ed8fd0104e1d4bf99c249ac229ce16
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;9d9ba22068c6c0ab742424760911d463
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;6aafb4b85f0c952a9ce4275bc821391a
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;a65fcd0d2394f006e3fba0fd34c4bc4a
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;b260f4b45dec3285875589c97d3087c9
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;134d3a3aa2f904512e85aa2dc2202498
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-----END OpenVPN Static key V1-----
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Peer Certificate Authority: &lt;code&gt;SurfShark_Auth&lt;/code&gt;&lt;br&gt;
Client Certificate: None (Username and Password required)&lt;br&gt;
Encryption Algorithm: AES-256-GCM (256 bit key, 125 bit block, TLS client \ server mode only)&lt;br&gt;
Auth Digest Algorithm: SHA512&lt;/p&gt;
&lt;p&gt;TUNNEL SETTINGS:&lt;br&gt;
IPv4 tunnel network: Leave blank&lt;br&gt;
IPv6 tunnel network: Leave blank&lt;br&gt;
IPv4 remote network: Leave blank&lt;br&gt;
IPv6 remote network: Leave blank&lt;br&gt;
Limit outgoing bandwidth: Leave blank&lt;br&gt;
Compression: No Preference&lt;br&gt;
Type-of-service: Leave unchecked&lt;br&gt;
Don’t pull routes: Check&lt;br&gt;
Don’t add/remove routes: Check&lt;/p&gt;
&lt;p&gt;ADVANCED CONFIGURATION:&lt;br&gt;
Advanced: Paste the contents down below&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;remote-random&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tun-mtu 1500&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tun-mtu-extra 32&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mssfix 1450&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;persist-key&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;persist-tun&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;reneg-sec 0&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;remote-cert-tls server&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Verbosity level: 3 (recommended)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/6.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;2527&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/6_hu893780032142600533.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/6_hu2479178022880790806.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Client All Settings&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;59&#34;
		data-flex-basis=&#34;142px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;Click on Save.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/5.jpg&#34;
	width=&#34;2322&#34;
	height=&#34;396&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/5_hu5941429957273880436.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/5_hu15487767258381819524.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Client Completed&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;586&#34;
		data-flex-basis=&#34;1407px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;Navigate to VPN &amp;gt; OpenVPN &amp;gt; Connection Status
You should see that the connection is &amp;ldquo;Connected&amp;rdquo;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/7.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;433&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/7_hu14427438465234023342.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/7_hu8135503401751090877.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Client Connected&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;346&#34;
		data-flex-basis=&#34;831px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;assigning-and-creating-the-interface&#34;&gt;Assigning and Creating the Interface
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Navigate to Interfaces &amp;gt; Assignments&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add the &amp;ldquo;VPN&amp;rdquo; interface and give it a Description.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/8.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;525&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/8_hu1412720640831685740.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/8_hu16381847535995140191.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Assign Interface&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;285&#34;
		data-flex-basis=&#34;685px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;
&lt;p&gt;Click on the &amp;ldquo;Add&amp;rdquo; button and then the &amp;ldquo;Save&amp;rdquo; button.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Navigate to the new interface you just created and then check the &amp;ldquo;enabled&amp;rdquo; checkbox.
Scroll down to the bottom of the page and &amp;ldquo;Save&amp;rdquo; and then click on the &amp;ldquo;Apply Changes&amp;rdquo; button&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/9.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;525&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/9_hu12725806584729763601.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/9_hu14483725450214865826.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enable Interface&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;285&#34;
		data-flex-basis=&#34;685px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;create-an-outbound-nat-rule&#34;&gt;Create an Outbound NAT rule
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Navigate to Firewall &amp;gt; NAT &amp;gt; Outbound, select Hybrid outbound NAT rule generation (automatically generated rules are applied after manual rules), click Save and Apply Changes.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/10.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;525&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/10_hu17586367467150252138.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/10_hu12882710582727958411.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Hybrid outbound&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;285&#34;
		data-flex-basis=&#34;685px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Click on the +Add button on top, on the edit menu, select Interface as &amp;ldquo;SurfShark_UK&amp;rdquo;. Leave anything else as it is by default,&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/11.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;525&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/11_hu5115204845242735595.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/11_hu15993533372347068125.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Create outbound rule&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;285&#34;
		data-flex-basis=&#34;685px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Give it a description &lt;code&gt;SurfShark_UK_OUT&lt;/code&gt; for example, click Save, and Apply Changes.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/12.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;754&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/12_hu6755886834075579986.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/12_hu13152555916007206272.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;outbound rule created&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;198&#34;
		data-flex-basis=&#34;477px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;edit-the-management-firewall-rules-to-route-the-traffic-through-the-vpn&#34;&gt;Edit the Management firewall rules to route the traffic through the VPN.
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Navigate to Firewall -&amp;gt; Rules -&amp;gt; MANAGEMENT
and that click on the edit button next to IPv4.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/13.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;754&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/13_hu5758616938306247829.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/13_hu14346412766442817293.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Management network&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;198&#34;
		data-flex-basis=&#34;477px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Scroll down and under Advanced features, select Gateway as &lt;code&gt;SurfShark_UK_VPNV4&lt;/code&gt;. Click Save.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/14.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;754&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/14_hu6043320257372951811.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/14_hu10735180293915833401.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Set Gateway&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;198&#34;
		data-flex-basis=&#34;477px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;test-the-connection&#34;&gt;Test the connection
&lt;/h2&gt;&lt;p&gt;If we do a simple speed test, we will see that our IP address and Location is now showing as &amp;ldquo;London&amp;rdquo;. The VPN gateway is ready to be used.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/15.jpg&#34;
	width=&#34;1500&#34;
	height=&#34;754&#34;
	srcset=&#34;http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/15_hu4784286626096199166.jpg 480w, http://localhost:1313/post/surfshark-client-opnsense-22-03-2024/15_hu3369082289472583534.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Location London&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;198&#34;
		data-flex-basis=&#34;477px&#34;
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>OpnSense DNS and Block List Setup</title>
        <link>http://localhost:1313/post/opnsense-dns-and-block-list-setup-12-03-2024/</link>
        <pubDate>Tue, 12 Mar 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/opnsense-dns-and-block-list-setup-12-03-2024/</guid>
        <description>&lt;img src="http://localhost:1313/post/opnsense-dns-and-block-list-setup-12-03-2024/splash.jpg" alt="Featured image of post OpnSense DNS and Block List Setup" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/C00L9ngsGsw&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

</description>
        </item>
        <item>
        <title>Finishing the Management Network</title>
        <link>http://localhost:1313/post/finishing-the-management-network-01-03-2024/</link>
        <pubDate>Fri, 01 Mar 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/finishing-the-management-network-01-03-2024/</guid>
        <description>&lt;img src="http://localhost:1313/post/finishing-the-management-network-01-03-2024/splash.jpg" alt="Featured image of post Finishing the Management Network" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/3gnNcO2v3ys&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

</description>
        </item>
        <item>
        <title>OpnSense Virtual Machine Installation on Proxmox</title>
        <link>http://localhost:1313/post/opnsense-vm-install-12-02-2024/</link>
        <pubDate>Mon, 12 Feb 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/opnsense-vm-install-12-02-2024/</guid>
        <description>&lt;img src="http://localhost:1313/post/opnsense-vm-install-12-02-2024/Splash.jpg" alt="Featured image of post OpnSense Virtual Machine Installation on Proxmox" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/dCRhCrokeSo&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&#34;introduction&#34;&gt;Introduction
&lt;/h2&gt;&lt;p&gt;The first step in creating our new OpnSense VM, is to get our network bridges setup and ready to use. Once we have that in order, we will move onto creating the virtual machine and attaching the network bridges to it.&lt;/p&gt;
&lt;p&gt;We will then move onto Installing OpnSense onto the virtual machine and do some initial configurations in the OpnSense shell.&lt;/p&gt;
&lt;p&gt;Lastly we will login to the OpnSense Web UI to add and configure all the network interfaces and services.&lt;/p&gt;
&lt;p&gt;This is going to be a long but very fun project, let&amp;rsquo;s get started.&lt;/p&gt;
&lt;h2 id=&#34;figuring-out-what-port-belongs-to-which-network-name&#34;&gt;Figuring out what port belongs to which network name
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;An easy way on how to know which physical port belongs to the port name in Proxmox, is to do the following:&lt;/p&gt;
&lt;p&gt;Open Up two Proxmox web UI instances in your browser. One will have the &amp;ldquo;Network&amp;rdquo; section open and the other we will have the &amp;ldquo;Shell&amp;rdquo; open. Ps since my screen has a small real estate to work on, I will just have them open in tabs rather than two windows.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/1.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;715&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/1_hu7248502165781855676.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/1_hu613420670941183187.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Proxmox Web UI&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;167&#34;
		data-flex-basis=&#34;402px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Using the following command in the shell, we can see which network ports are in the &amp;ldquo;UP&amp;rdquo; state:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ip a &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep &lt;span class=&#34;s1&#34;&gt;&amp;#39;state UP&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If i run that now, I will see that the main Proxmox connection (Port and bridge) is up.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/2.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;207&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/2_hu11112366058122716134.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/2_hu9194575729566341580.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ip a shell 1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;579&#34;
		data-flex-basis=&#34;1391px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;So it shows that &lt;code&gt;eno1&lt;/code&gt; and &lt;code&gt;vmbr0&lt;/code&gt; is up. If we check on the &amp;ldquo;Network&amp;rdquo; section we can see that it is indeed the main Proxmox connections and it is up since we are currently connected to it.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/3.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;207&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/3_hu8631026807304683640.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/3_hu15331346938925412444.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;network section 1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;579&#34;
		data-flex-basis=&#34;1391px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;em&gt;Just as a side note, remember to always label your cables to help with avoiding the headache of having to trace cables in the future.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/4.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/4_hu7535521763640944099.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/4_hu6056533031851891586.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Labels&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;
&lt;p&gt;We will now use this method to figure out the name of the port we will be using for our first &amp;ldquo;WAN&amp;rdquo; connection.&lt;/p&gt;
&lt;p&gt;Connect your first WAN cable in to the port you want to use, in this case, the first port of the first NIC. See the &amp;ldquo;Home Lab Network Design&amp;rdquo; post for the diagram I&amp;rsquo;m using to set up my network:
&lt;a class=&#34;link&#34; href=&#34;https://jono-moss.github.io/post/home-lab-network-design-26-01-2024/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://jono-moss.github.io/post/home-lab-network-design-26-01-2024/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/5.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;535&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/5_hu5885329594330744190.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/5_hu10023029241119899683.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;WAN Connection to port 1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;224&#34;
		data-flex-basis=&#34;538px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Now do the same command as in the previous step and we should now see the name of the port associated to it:&lt;/p&gt;
&lt;p&gt;From the screenshot below, we can see the port is named &amp;ldquo;enp7s0f0&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/6.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;330&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/6_hu15983297158221883721.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/6_hu17770875503113314619.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;port 1 association name&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;363&#34;
		data-flex-basis=&#34;872px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;With this information, we can add a comment to that port so we will know in the future, what it is used for.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/7.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;594&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/7_hu113106840193356844.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/7_hu15406911639773510271.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;port 1 comment&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;202&#34;
		data-flex-basis=&#34;484px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;We will repeat this process with the next WAN port. We will unplug the connection from the first port and will plug it into the third port to see what we get. Then we can create a comment on that port.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/8.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;594&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/8_hu16678342587377383904.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/8_hu6702512374010093240.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;WAN Connection to port 3&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;202&#34;
		data-flex-basis=&#34;484px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/9.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;594&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/9_hu9951230768607684318.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/9_hu18313199341639178486.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;port 3  association name&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;202&#34;
		data-flex-basis=&#34;484px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/10.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;594&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/10_hu10162817471244679762.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/10_hu4629707336511240292.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;port 3 comment&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;202&#34;
		data-flex-basis=&#34;484px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;From the above results, we can now make the conclusion that the last two ports will be the following:
&lt;code&gt;enp7s0f1&lt;/code&gt; will be our &lt;code&gt;Management&lt;/code&gt; network and &lt;code&gt;enp9s0f1&lt;/code&gt; will be our &lt;code&gt;Trunk&lt;/code&gt; network. We can add comments to them and we are now ready to create the bridges.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/11.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;594&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/11_hu17630262283670671325.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/11_hu1220196294773207335.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ports commented&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;202&#34;
		data-flex-basis=&#34;484px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;setup-the-network-bridges-on-proxmox&#34;&gt;Setup the network bridges on Proxmox
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Click on the &amp;ldquo;Create&amp;rdquo; button and choose the &amp;ldquo;Linux Bridge&amp;rdquo; option.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/12.jpg&#34;
	width=&#34;932&#34;
	height=&#34;644&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/12_hu10486479687962083770.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/12_hu7848842597418078116.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;create bridge button&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Under the &amp;ldquo;Bridge Port&amp;rdquo; input, we will put in the name of the first WAN port, in this case it is &lt;code&gt;enp7s0f0&lt;/code&gt;. We can also give it a comment like &amp;ldquo;OP WAN1&amp;rdquo; so that we will know wht this new bridge network will be for.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/13.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;624&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/13_hu18290051071372500943.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/13_hu15528763063058906316.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;create bridge WAN 1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;192&#34;
		data-flex-basis=&#34;461px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Repeat this process for all the other ports till you have 4 new bridge connections.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/14.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;478&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/14_hu7667791925632472171.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/14_hu17014390818540984315.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;create bridge connections all&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;251&#34;
		data-flex-basis=&#34;602px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Now the last setting we need to enable is the &amp;ldquo;VLAN Aware&amp;rdquo; option on the &amp;ldquo;Trunk&amp;rdquo; bridge. This will let Proxmox know that VLAN traffic will be used on it.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/22.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;542&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/22_hu11498988344837511770.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/22_hu18234937095343043366.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;VLAN Aware&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;221&#34;
		data-flex-basis=&#34;531px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;Once completed, click on the &amp;ldquo;Apply Configuration&amp;rdquo; button and accept the confirmation dialog to save the networks.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/15.jpg&#34;
	width=&#34;762&#34;
	height=&#34;328&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/15_hu18261016390422099582.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/15_hu16948618447462958818.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Apply Networks&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;232&#34;
		data-flex-basis=&#34;557px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;We are now ready to move onto downloading the OpnSense ISO.&lt;/p&gt;
&lt;h2 id=&#34;downloading-the-opnsense-iso&#34;&gt;Downloading the OpnSense ISO
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Goto the OpnSense download page and make sure to get the &amp;ldquo;DVD&amp;rdquo; version.
&lt;a class=&#34;link&#34; href=&#34;https://opnsense.org/download/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://opnsense.org/download/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/16.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;697&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/16_hu13563737721135072982.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/16_hu96329434039387686.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ISO Download&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;172&#34;
		data-flex-basis=&#34;413px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Extract the iso from the .bz2 file. Please not that on MacOS you will need a 3rd party extraction tool. In my case I used an app called &amp;ldquo;The Unarchiver&amp;rdquo;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/17.jpg&#34;
	width=&#34;724&#34;
	height=&#34;472&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/17_hu14799637212355498294.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/17_hu3262903975028305458.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ISO Extracted&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;153&#34;
		data-flex-basis=&#34;368px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;On Proxmox, goto the &amp;ldquo;local&amp;rdquo; drive and select the &amp;ldquo;ISO Images&amp;rdquo; menu.
From there select the &amp;ldquo;upload&amp;rdquo; button.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/18.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;409&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/18_hu17712698907443019899.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/18_hu9819837236451887476.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Upload Button&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;293&#34;
		data-flex-basis=&#34;704px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Click on the &amp;ldquo;Select File&amp;rdquo; button and find the iso file you downloaded. Then click on the &amp;ldquo;Upload&amp;rdquo; button to begin the upload.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/19.jpg&#34;
	width=&#34;980&#34;
	height=&#34;546&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/19_hu15713842591358093833.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/19_hu9119476216128392028.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Upload iso&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;179&#34;
		data-flex-basis=&#34;430px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;The ISO will be uploaded and we can now move to creating the virual machine.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/20.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;542&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/20_hu7548655585092401656.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/20_hu12707447659998263449.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Uploaded ISO&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;221&#34;
		data-flex-basis=&#34;531px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/21.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;542&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/21_hu5312529944285945213.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/21_hu9085314259155758790.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ISO&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;221&#34;
		data-flex-basis=&#34;531px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;creating-the-virtual-machine&#34;&gt;Creating the Virtual Machine
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Click on the &amp;ldquo;Create VM&amp;rdquo; blue button on the top right of the Proxmox UI.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/23.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;542&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/23_hu18344999150600057361.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/23_hu8320712301949414971.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Create VM Button&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;221&#34;
		data-flex-basis=&#34;531px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Make sure the &amp;ldquo;Advanced&amp;rdquo; box is checked. It is next to the &amp;ldquo;Back&amp;rdquo; button.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/24.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;321&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/24_hu3457176779281136197.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/24_hu6032079579890358523.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Advanced is Checked&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;373&#34;
		data-flex-basis=&#34;897px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Give the VM a name, in this case I will call it &amp;ldquo;OpnSense&amp;rdquo;.
Enable the &amp;ldquo;Start at boot&amp;rdquo; box and set the &amp;ldquo;Start/Shutdown Order&amp;rdquo; to &amp;ldquo;1&amp;rdquo;. This will make sure that OpnSense is the first VM to start when Proxmox boots up.
Click on the &amp;ldquo;Next&amp;rdquo; button once you have done so.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/25.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;869&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/25_hu17569407689399875630.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/25_hu8539307342706394682.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Give VM a Name&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;138&#34;
		data-flex-basis=&#34;331px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Select the &amp;ldquo;OpnSense&amp;rdquo; ISO we uploaded in the previous section and then click on the &amp;ldquo;Next&amp;rdquo; button once you have done so.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/26.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;869&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/26_hu12347001325302025523.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/26_hu5222735361982428524.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Select ISO&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;138&#34;
		data-flex-basis=&#34;331px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;We will leave the settings in the &amp;ldquo;System&amp;rdquo; section as is, Click on the &amp;ldquo;Next&amp;rdquo; button.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/27.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;869&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/27_hu395472811114025780.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/27_hu15899762218123983528.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;System Settings&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;138&#34;
		data-flex-basis=&#34;331px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;We will also leave the &amp;ldquo;Disks&amp;rdquo; section as is. Since I would like to install plugins and have &amp;ldquo;IPS/IDS&amp;rdquo; data and other block lists. 32GB will be enough space for the VM.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/28.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;869&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/28_hu7639724437143156432.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/28_hu17085973163882286989.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Disks Settings&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;138&#34;
		data-flex-basis=&#34;331px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;For the CPU &amp;ldquo;Type&amp;rdquo;, We will set it to &amp;ldquo;host&amp;rdquo;, this will allow OpnSense direct access to the CPUs &amp;ldquo;instruction sets&amp;rdquo; for better performance. I will also give the VM 4 cores so that there will be enough cores for when we start using things like &amp;ldquo;IPS/IDS&amp;rdquo; and VPNs.
Click on the &amp;ldquo;Next&amp;rdquo; button once you have done so.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/29.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;869&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/29_hu18072217741120647426.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/29_hu13111229642833449591.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;CPU Settings&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;138&#34;
		data-flex-basis=&#34;331px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;For the RAM, I will give the VM 4GB for the same reason as above. I will leave on &amp;ldquo;Ballooning&amp;rdquo;, so that when the VM is not using all the RAM, it can be used elsewhere. Click on the &amp;ldquo;Next&amp;rdquo; button once you have done so.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/30.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;869&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/30_hu2769395268153728374.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/30_hu10528039030081022023.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Memory Settings&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;138&#34;
		data-flex-basis=&#34;331px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;For the network section, we will add the first network to it (vmbr1). We will add the other bridges to the VM in a bit. PS I forgot to turn off the &amp;ldquo;Firewall&amp;rdquo; option. I turned it off ofter I added all the connections to the VM. Click on the &amp;ldquo;Next&amp;rdquo; button once you have done so.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/31.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;869&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/31_hu17060182704934481550.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/31_hu13794003168169109301.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Network Settings&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;138&#34;
		data-flex-basis=&#34;331px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;10&#34;&gt;
&lt;li&gt;You can continue to click on the &amp;ldquo;finish&amp;rdquo; button to complete the VM creation.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/32.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;869&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/32_hu10550551627278760635.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/32_hu18246715300366594015.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Complete Settings&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;138&#34;
		data-flex-basis=&#34;331px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;11&#34;&gt;
&lt;li&gt;Now all that is left is to add the last three bridge connections to the VM.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;With the VM selected, open the &amp;ldquo;Hardware Device&amp;rdquo; section, Click on the &amp;ldquo;Add&amp;rdquo; button and select the &amp;ldquo;Network&amp;rdquo; option.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/33.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;438&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/33_hu10813457750178369144.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/33_hu1577783402108467778.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Add Network&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;273&#34;
		data-flex-basis=&#34;657px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;12&#34;&gt;
&lt;li&gt;Now like in step 9, set the Bridge to &amp;ldquo;vmbr2&amp;rdquo; and tick off the &amp;ldquo;Firewall&amp;rdquo; option, just I reminder, I forgot to turn off the &amp;ldquo;Firewall&amp;rdquo; option here but corrected that once I noticed I forgot to do it. Click on the &amp;ldquo;Add&amp;rdquo; button once you have done so.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/34.jpg&#34;
	width=&#34;1162&#34;
	height=&#34;674&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/34_hu13471507829394318391.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/34_hu7272798774752019806.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Add next Network&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;172&#34;
		data-flex-basis=&#34;413px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;13&#34;&gt;
&lt;li&gt;Repeat step 11 for &amp;ldquo;vmbr3&amp;rdquo; and &amp;ldquo;vmbr4&amp;rdquo; until you have all four bridges attached to the vm.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/35.jpg&#34;
	width=&#34;1162&#34;
	height=&#34;674&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/35_hu2884437429227513141.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/35_hu17335187467444263777.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;All Bridges Added firewall on&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;172&#34;
		data-flex-basis=&#34;413px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/36.jpg&#34;
	width=&#34;1162&#34;
	height=&#34;674&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/36_hu15908559019894482247.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/36_hu7541027429713391261.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;All Bridges Added&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;172&#34;
		data-flex-basis=&#34;413px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;installing-opnsense&#34;&gt;Installing OpnSense
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Make sure that there are no Network cables plugged into the OpnSense ports. We will connect them later.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Click on the &amp;ldquo;Start&amp;rdquo; button and then open the VM&amp;rsquo;s &amp;ldquo;Console&amp;rdquo;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/37.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;484&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/37_hu11433341059260298236.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/37_hu10159486832662408836.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Start VM&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;247&#34;
		data-flex-basis=&#34;595px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Wait for the OpnSense to boot up, it took around 2 minutes to do so. When it is ready, you will be presented with a login prompt.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/38.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/38_hu11911750768456959596.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/38_hu3676399903177378591.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Booted VM up&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Login using the following details:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;login: installer
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;password: opnsense
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You will be presented with a menu where we can start the installation process.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/40.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/40_hu15643658036666098971.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/40_hu7695806595447153007.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Installer start screen&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;
&lt;p&gt;Choose the &amp;ldquo;Keymap&amp;rdquo; you would like to use, in my case it is the &amp;ldquo;default&amp;rdquo;. Use the &amp;ldquo;Up&amp;rdquo; and &amp;ldquo;Down&amp;rdquo; arrows to highlight your choice, then press the &amp;ldquo;Space bar&amp;rdquo; to select your option. Once selected press &amp;ldquo;Enter / Return&amp;rdquo; on your keyboard to continue to the next screen.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Next I will choose the &amp;ldquo;Install (UFS)&amp;rdquo; option, if you would like to use &amp;ldquo;ZFS&amp;rdquo; you can.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/41.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/41_hu13241641637573755677.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/41_hu12958910529805367483.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;UFS&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;We will then choose the &amp;ldquo;da0&amp;rdquo; drive which is the 32GB disk we created as the installation media to install OpnSense on.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/42.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/42_hu8612918211959119158.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/42_hu9876820514136812858.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;install disk&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;You will be presented with a confirmation prompt to create a swap partition. Accept it to continue.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/43.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/43_hu18388318630160281842.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/43_hu7196105030222828540.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;swap partition prompt&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;You will then be prompted to confirm your choices. Select &amp;ldquo;Yes&amp;rdquo; to continue.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/44.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/44_hu11704916113564824564.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/44_hu2047610919096531022.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;confirm prompt&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;10&#34;&gt;
&lt;li&gt;OpnSense will start to install, this can take around 4 minute plus to install.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/45.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/45_hu861630890775212677.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/45_hu7409375293647326101.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;installing&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;11&#34;&gt;
&lt;li&gt;Once the installation is completed, You will be presented with a menu to change the &amp;ldquo;root&amp;rdquo; password. It is recommended to do so.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/46.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/46_hu11023956708180699271.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/46_hu7762520039507644468.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;completed menu&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/47.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/47_hu16859736729288539937.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/47_hu13576096009507090215.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Set password menu&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;12&#34;&gt;
&lt;li&gt;When you are ready, Select the &amp;ldquo;Complete Install&amp;rdquo; option.
When you select it, go into the &amp;ldquo;Hardware&amp;rdquo; section of the VM again and unmount the ISO.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/48.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/48_hu4135014876488646331.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/48_hu7167381078201354371.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Complete Install&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/49.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/49_hu15521133154121300978.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/49_hu10509298634390843286.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;remove ISO&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;13&#34;&gt;
&lt;li&gt;Well done. The VM will restart and boot again into the installed OpnSense instance.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/50.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/50_hu2846845898311416080.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/50_hu6594512000536536767.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Restarting&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;creating-the-networks-in-opnsense-terminal&#34;&gt;Creating the networks in OpnSense terminal
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Connect the WAN 1 cable into the WAN Port 1, and Connect a cable into the &amp;ldquo;Management&amp;rdquo; Network. We will use this &amp;ldquo;Management LAN&amp;rdquo; connection to connect directly to the OpnSense web UI later on.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/51.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/51_hu1376802192058138222.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/51_hu12577499492397844348.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Initial Cable Connections&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Login to OpnSense with the root user and the password you set during the installation stage. Once logged in, you will be presented with a menu where we can do the first network setup.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/52.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/52_hu6523999566529538651.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/52_hu2210948381608077094.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;root login&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Type &amp;ldquo;1&amp;rdquo; and press &amp;ldquo;Enter / Return&amp;rdquo; to start the &amp;ldquo;Assign Interfaces&amp;rdquo; process.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/53.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;280&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/53_hu35459698527493727.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/53_hu7276783195906756240.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Assign Interfaces&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;428&#34;
		data-flex-basis=&#34;1028px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Type &amp;ldquo;n&amp;rdquo; for the &amp;ldquo;LAGGs&amp;rdquo; and &amp;ldquo;VLANs&amp;rdquo; options.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/54.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;280&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/54_hu1141683702545674052.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/54_hu5071330148616735553.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;lagg vlan prompts&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;428&#34;
		data-flex-basis=&#34;1028px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;Next we will be asked to assign the &amp;ldquo;WAN&amp;rdquo; connection. In proxmox, we attached the first &amp;ldquo;WAN&amp;rdquo; bridge to the VM and it is called &amp;ldquo;net0&amp;rdquo;.
This will be called &amp;ldquo;vtnet0&amp;rdquo; on OpenSense. So we will now type &amp;ldquo;vtnet0&amp;rdquo; and press &amp;ldquo;Enter / Return&amp;rdquo; to assign that as the WAN.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/55.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;498&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/55_hu15520220910066323330.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/55_hu5205370427230110611.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Bridge Names&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;240&#34;
		data-flex-basis=&#34;578px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/56.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;306&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/56_hu9342888360670674786.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/56_hu13811729269818073728.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;cmd assign wan&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;392&#34;
		data-flex-basis=&#34;941px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;You will now be asked to assign the &amp;ldquo;LAN&amp;rdquo; network. This network will become our &amp;ldquo;Management&amp;rdquo; network. So for this, type &amp;ldquo;vtnet1&amp;rdquo; and press &amp;ldquo;Enter / Return&amp;rdquo; to assign it.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/57.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;306&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/57_hu1548495778732690259.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/57_hu10825082683787157566.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;cmd assign lan&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;392&#34;
		data-flex-basis=&#34;941px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;You will now be asked if you would like to assign another network or end the assignment process. We will press &amp;ldquo;Enter / Return&amp;rdquo; to end and complete the assignments as we will now move on to logging in to the OpnSense web UI to add and edit the networks.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/58.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;306&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/58_hu14676209249065094383.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/58_hu11498094790362426275.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;cmd assign completed&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;392&#34;
		data-flex-basis=&#34;941px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;Now we will be able to see that the two networks are up and running. You will be presented the the current IP addresses of the new networks we have just assigned / created. In this case we are indeed connected to our first WAN connection as we where givin the IP address of &amp;ldquo;172.16.0.3&amp;rdquo; and OpnSense created a LAN connection with the range of &amp;ldquo;192.168.1.1/24&amp;rdquo;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/59.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;517&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/59_hu17237399841367918835.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/59_hu11682085909243356540.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;get lan ip&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;232&#34;
		data-flex-basis=&#34;557px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;You can now type in &amp;ldquo;0&amp;rdquo; and press &amp;ldquo;Enter / Return&amp;rdquo; to logout of the shell.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;creating-the-last-two-networks-in-opnsense-web-ui&#34;&gt;Creating the last two networks in OpnSense web UI
&lt;/h2&gt;&lt;h3 id=&#34;connect-the-last-cable&#34;&gt;Connect the last cable
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;We can now plug in the second WAN cable into our OpnSense VM as we are going to create that interface and network soon.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/87.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/87_hu4787072198632206872.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/87_hu18027147924589935311.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Plug in 2nd&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;assigning-the-interfaces&#34;&gt;Assigning the interfaces
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;Connect your laptop / PC directly to the LAN network we just created, (the to be management network). OpnSense will give you an IP
address in the range of the Lan &amp;ldquo;192.168.1.1/24&amp;rdquo;. So I was given &amp;ldquo;192.168.1.101&amp;rdquo;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/60.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;847&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/60_hu10704789310565599296.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/60_hu1511176442163115004.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;initial cable from OpnSense&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;141&#34;
		data-flex-basis=&#34;340px&#34;
	
&gt;
&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/61.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;822&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/61_hu10160521201894855061.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/61_hu15127511239367124479.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;initial cable to laptop&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;145&#34;
		data-flex-basis=&#34;350px&#34;
	
&gt;
&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/62.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;851&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/62_hu17449273413076265464.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/62_hu8282798269212074415.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;given lan ip&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;141&#34;
		data-flex-basis=&#34;338px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;We can now login to the OpnSense Web UI by going to
https://192.168.1.1
You can allow the security warning as OpnSense is using a self signed certificate.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/63.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;693&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/63_hu2234235120579096519.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/63_hu10690195265297143914.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;login screen&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;173&#34;
		data-flex-basis=&#34;415px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Once logged in, you will most probably be presented with a &amp;ldquo;Set up wizard&amp;rdquo; screen. We will not go through the wizard as we will manually continue to do the set up. So you can click on the &amp;ldquo;Dashboard&amp;rdquo; menu under the &amp;ldquo;Lobby&amp;rdquo; section.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/64.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;429&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/64_hu1732405672444573997.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/64_hu7709596138525238817.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;wizard screen&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;279&#34;
		data-flex-basis=&#34;671px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Click on the &amp;ldquo;Assignments&amp;rdquo; menu under the &amp;ldquo;Interfaces&amp;rdquo; section. Here we will assign the last two interfaces.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/65.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;508&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/65_hu12128720965297948729.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/65_hu13445582677105320524.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;assign interface screen&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;236&#34;
		data-flex-basis=&#34;566px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;In the device list, select &amp;ldquo;vtnet2&amp;rdquo; and in the description type in &amp;ldquo;WAN2&amp;rdquo; as this will be the second WAN interface. Click on the &amp;ldquo;Add&amp;rdquo; button when done so.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/66.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;696&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/66_hu1936517329839507413.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/66_hu4471057184638002458.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;assign WAN2 interface&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;172&#34;
		data-flex-basis=&#34;413px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;Repeat this with &amp;ldquo;vtnet3&amp;rdquo; and in the description type in &amp;ldquo;TRUNK&amp;rdquo; as this will be the trunk interface. Click on the &amp;ldquo;Add&amp;rdquo; button when done so.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/67.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;696&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/67_hu12783103016279916395.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/67_hu14675914532316281488.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;assign TRUNK interface&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;172&#34;
		data-flex-basis=&#34;413px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;Now click on the &amp;ldquo;Save&amp;rdquo; button to complete the assignments.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/68.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;696&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/68_hu10766149825939669838.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/68_hu5443773785041372787.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;save interfaces&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;172&#34;
		data-flex-basis=&#34;413px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;enabling-the-interfaces-and-setting-ips&#34;&gt;Enabling the interfaces and setting IPs
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;Now we need to enable the interfaces and set their IP types.
Click on the &amp;ldquo;TRUNK&amp;rdquo; interface that we just created.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/69.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;511&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/69_hu5557281312352892866.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/69_hu4326036805966785022.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;enable TRUNK interface&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;234&#34;
		data-flex-basis=&#34;563px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Click on the &amp;ldquo;Enable&amp;rdquo; box. We will leave the rest of the interface settings as is for now. Since we will be using it as a &amp;ldquo;trunk&amp;rdquo; connection. It will not be getting an IP address as it will be used to accommodate multiple VLAN networks.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Scroll down and click on the &amp;ldquo;Save&amp;rdquo; button to continue. You can Ignore the &amp;ldquo;Apply Configurations&amp;rdquo; message for now as we will do that once we have completed editing all the settings.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/70.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;337&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/70_hu16138540677891789348.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/70_hu10730530592278513305.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;saved TRUNK interface&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;356&#34;
		data-flex-basis=&#34;854px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Click on the &amp;ldquo;WAN2&amp;rdquo; interface and click on the &amp;ldquo;Enable&amp;rdquo; box.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/71.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;337&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/71_hu8666493861487382368.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/71_hu4201223539639683854.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;enable wan2 interface&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;356&#34;
		data-flex-basis=&#34;854px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Set the &amp;ldquo;IPv4&amp;rdquo; type to &amp;ldquo;DHCP&amp;rdquo; and click on the &amp;ldquo;Save&amp;rdquo; button to continue.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/72.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;337&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/72_hu17705037122111596195.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/72_hu11400931895192133887.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;set dncp WAN2 interface&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;356&#34;
		data-flex-basis=&#34;854px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;We can now click on the &amp;ldquo;Apply Configurations&amp;rdquo; button to finalise the configurations and apply them. Please take note that this can take a few minutes to apply, if you see it loading for more than two minutes, don&amp;rsquo;t panic as it does take time.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/73.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;407&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/73_hu7052172933232662149.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/73_hu7473781654021435182.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;apply interface&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;294&#34;
		data-flex-basis=&#34;707px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;If we now go back to the &amp;ldquo;Dashboard&amp;rdquo; and scroll down to the &amp;ldquo;Interfaces&amp;rdquo; widget. We will see that everything is in order, both the WAN connections are getting an IP address, and the trunk interface is active.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/74.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;650&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/74_hu9867238579917125671.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/74_hu4558598021379555405.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;confirmed interface&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;184&#34;
		data-flex-basis=&#34;443px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;changing-the-name-ip-address-and-dhcp-range-of-the-management-network&#34;&gt;Changing the Name, IP address and DHCP range of the management network
&lt;/h2&gt;&lt;p&gt;The last step we will do on this guide is set up the management network. In the next guide we will setup the managed switch to help distribute the management network and we will setup a Wifi access point for easier connection to the lab.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Click on the &amp;ldquo;LAN&amp;rdquo; Interface under the &amp;ldquo;Interfaces&amp;rdquo; section. Change the description from &amp;ldquo;LAN&amp;rdquo; to &amp;ldquo;Management&amp;rdquo;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/75.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;306&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/75_hu17886546931999402159.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/75_hu8973362028395590199.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;management description change&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;392&#34;
		data-flex-basis=&#34;941px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Since I won&amp;rsquo;t be using IPv6, I will disable it by setting the type to &amp;ldquo;none&amp;rdquo;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/76.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;306&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/76_hu5532945929647080929.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/76_hu7550861399741352622.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Management IPv6 change&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;392&#34;
		data-flex-basis=&#34;941px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Scroll down and change the IP address to &amp;ldquo;10.0.0.1&amp;rdquo;. This will be the IP address range that we will use for all our management devices and software.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/77.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;268&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/77_hu1229376182233027606.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/77_hu3870800003924729678.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Management IP change&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;447&#34;
		data-flex-basis=&#34;1074px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;
&lt;p&gt;Click on the &amp;ldquo;Save&amp;rdquo; button to continue.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Before we apply the settings, we need to change the DHCP range to be in the &amp;ldquo;10.0.0.0/24&amp;rdquo; subnet.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Under &amp;ldquo;Services&amp;rdquo;, then &amp;ldquo;ISC DHCPv4&amp;rdquo;, click on the &amp;ldquo;Management&amp;rdquo; option.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/78.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;436&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/78_hu1995769678070698767.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/78_hu4830190174218471250.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Management DHCP Screen&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;275&#34;
		data-flex-basis=&#34;660px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;You will notice that the old range is not in the same subnet as the new IP range. So we will change it now.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/79.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;436&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/79_hu7227198212779989462.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/79_hu126699045127923410.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Management wrong Subnet&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;275&#34;
		data-flex-basis=&#34;660px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;Put in the IP range you would like, in this case i will use:
&amp;ldquo;10.0.0.10&amp;rdquo; to &amp;ldquo;10.0.0.60&amp;rdquo;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/80.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;404&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/80_hu13095344950975462787.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/80_hu16867508852008299276.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Management set range&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;297&#34;
		data-flex-basis=&#34;712px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;Click &amp;ldquo;Save&amp;rdquo; to finalise the DHCP changes.
&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/81.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;448&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/81_hu17583644719885081000.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/81_hu9660151762117922665.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Management set range save&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;267&#34;
		data-flex-basis=&#34;642px&#34;
	
&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Note that once it is saved, the DHCP service will be stopped due to the fact that we have not &amp;ldquo;Applied&amp;rdquo; the changes to the &amp;ldquo;Management&amp;rdquo; interface yet (step 4).&lt;/p&gt;
&lt;p&gt;We will do that now.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/82.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;232&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/82_hu16925018887619314034.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/82_hu6875810094512556581.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Management DHCP Stopped&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;517&#34;
		data-flex-basis=&#34;1241px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;Go back to the &amp;ldquo;Management&amp;rdquo; Interface and click on the &amp;ldquo;Apply Configurations&amp;rdquo; button to complete the setup.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/83.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;193&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/83_hu4732906621517626966.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/83_hu2176047235303413434.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Management interface apply&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;621&#34;
		data-flex-basis=&#34;1492px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;This will once again take a few minutes to &amp;ldquo;Apply&amp;rdquo; and take effect.
Wait for about two minutes and then do the following:&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Now since we have changed the IP address of the interface, we need to unplug and plug the cable back into the laptop / PC to get the new IP in the 10.0.0.0/24 range.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/84.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;618&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/84_hu590119388715119554.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/84_hu17754101855616665481.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;New IP received&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;194&#34;
		data-flex-basis=&#34;466px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;This is good news as it means the Management network is completed.&lt;/p&gt;
&lt;ol start=&#34;10&#34;&gt;
&lt;li&gt;Now we can goto
https://10.0.0.1
to login to the OpnSense UI again.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/85.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;414&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/85_hu13117885790972763576.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/85_hu770066233750562894.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;New login&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;289&#34;
		data-flex-basis=&#34;695px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;11&#34;&gt;
&lt;li&gt;Once logged in, scroll down to the &amp;ldquo;Interfaces&amp;rdquo; widget. We will see that everything is still in order, both the WAN connections are getting an IP address, the trunk interface is active and our &amp;ldquo;Management&amp;rdquo; network is on the new IP range.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/86.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;765&#34;
	srcset=&#34;http://localhost:1313/post/opnsense-vm-install-12-02-2024/86_hu11723422148395285123.jpg 480w, http://localhost:1313/post/opnsense-vm-install-12-02-2024/86_hu12646007459117361311.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Completed&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;156&#34;
		data-flex-basis=&#34;376px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion
&lt;/h2&gt;&lt;p&gt;We now officially have an OpnSense VM running and ready to be used in our Lab. In the next guide I will go through how to once again split the managed switch into more parts for us to join our management network to and then move the Proxmox instance to. We will also add a Wifi access point to the network for easier connection to our Lab.&lt;/p&gt;
&lt;p&gt;Have fun with your new OpnSense VM.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>How To Install Dell OpenManage Server Administrator on Proxmox 8.1.3</title>
        <link>http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/</link>
        <pubDate>Fri, 12 Jan 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/</guid>
        <description>&lt;img src="http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/splash.jpg" alt="Featured image of post How To Install Dell OpenManage Server Administrator on Proxmox 8.1.3" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/8QpCzaXBUI4&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&#34;what-is-dell-openmanage-server-administrator&#34;&gt;What is Dell OpenManage Server Administrator
&lt;/h2&gt;&lt;p&gt;In short Dell OpenManage Server Administrator (OMSA) is a tool &amp;ldquo;web browser-based graphical user interface&amp;rdquo; that allows you to manage your server without having to access the Configuration Utility in the boot screen.&lt;/p&gt;
&lt;p&gt;So the server can be running and services don&amp;rsquo;t need to be disrupted to do administration work.&lt;/p&gt;
&lt;p&gt;See the following link for more information:&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.dell.com/support/kbdoc/en-za/000132087/support-for-dell-emc-openmanage-server-administrator-omsa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.dell.com/support/kbdoc/en-za/000132087/support-for-dell-emc-openmanage-server-administrator-omsa&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;why-install-it&#34;&gt;Why Install it
&lt;/h2&gt;&lt;p&gt;I wanted the ability to control the PERC H700 RAID controller without having to restart the server in order to access the &amp;ldquo;RAID configuration Utility&amp;rdquo; in the boot screen.&lt;/p&gt;
&lt;p&gt;So adding and removing Hard Drives can be quick and easy to do.&lt;/p&gt;
&lt;h2 id=&#34;installation&#34;&gt;Installation
&lt;/h2&gt;&lt;p&gt;In order for the Dell OpenManage Server Administrator to see and have access to the H700 RAID controller. It has to be installed directly on the host OS itself.
You can install it in a &amp;ldquo;Privileged&amp;rdquo; container if you would like to. But it will not be able to access the RAID controller.&lt;/p&gt;
&lt;p&gt;I will once again use the &amp;ldquo;Shell&amp;rdquo; directly in the Proxmox web UI again. You can do this via ssh if you like.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/2.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;499&#34;
	srcset=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/2_hu8030502424255531809.jpg 480w, http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/2_hu17813455987272982239.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Proxmox Shell&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;240&#34;
		data-flex-basis=&#34;577px&#34;
	
&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Create a folder to store packages for installation&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir opman
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; opman
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/3.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;499&#34;
	srcset=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/3_hu7230299495642059996.jpg 480w, http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/3_hu7165052457349569282.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Create Folder&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;240&#34;
		data-flex-basis=&#34;577px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Create a file called &lt;code&gt;installOpenManage.sh&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nano installOpenManage.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/4.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;499&#34;
	srcset=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/4_hu14393087155774058256.jpg 480w, http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/4_hu12634137511100711668.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Create File&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;240&#34;
		data-flex-basis=&#34;577px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Paste in the following&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;apt update
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# This is up to you if you would like to apply all updates&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;apt upgrade
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# These are the extra dependencies I needed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# You can see if you are successful without them&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;apt install gnupg libcurl4 libncurses5 libxslt1-dev libgpm2 libtinfo5
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Downloads the signature Key from Dell and adds the key to the source file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir -p /etc/apt/keyrings
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;keyring&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/apt/keyrings/linux.dell.com.gpg
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -qO - https://linux.dell.com/repo/pgp_pubkeys/0x1285491434D8786F.asc &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; gpg --dearmor -o &lt;span class=&#34;nv&#34;&gt;$keyring&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;chmod +r &lt;span class=&#34;nv&#34;&gt;$keyring&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;deb [signed-by=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$keyring&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;] http://linux.dell.com/repo/community/openmanage/10300/focal focal main&amp;#34;&lt;/span&gt; &amp;gt; /etc/apt/sources.list.d/linux.dell.com.list
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Do a repo update to get OpenManage repos&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;apt update
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# This will download all the needed packages&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -c http://archive.ubuntu.com/ubuntu/pool/universe/o/openwsman/libwsman-curl-client-transport1_2.6.5-0ubuntu8_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -c http://archive.ubuntu.com/ubuntu/pool/universe/o/openwsman/libwsman-client4_2.6.5-0ubuntu8_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -c http://archive.ubuntu.com/ubuntu/pool/universe/o/openwsman/libwsman1_2.6.5-0ubuntu8_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -c http://archive.ubuntu.com/ubuntu/pool/universe/o/openwsman/libwsman-server1_2.6.5-0ubuntu8_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -c http://archive.ubuntu.com/ubuntu/pool/universe/s/sblim-sfcc/libcimcclient0_2.2.8-0ubuntu2_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -c http://archive.ubuntu.com/ubuntu/pool/universe/o/openwsman/openwsman_2.6.5-0ubuntu8_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -c http://archive.ubuntu.com/ubuntu/pool/multiverse/c/cim-schema/cim-schema_2.48.0-0ubuntu1_all.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -c http://archive.ubuntu.com/ubuntu/pool/universe/s/sblim-sfc-common/libsfcutil0_1.0.1-0ubuntu4_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -c http://archive.ubuntu.com/ubuntu/pool/multiverse/s/sblim-sfcb/sfcb_1.4.9-0ubuntu7_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -c http://archive.ubuntu.com/ubuntu/pool/universe/s/sblim-cmpi-devel/libcmpicppimpl0_2.0.3-0ubuntu2_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -c http://ftp.us.debian.org/debian/pool/main/o/openssl/libssl1.1_1.1.1w-0+deb11u1_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# and install them if not already installed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i libwsman-curl-client-transport1_2.6.5-0ubuntu8_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i libwsman-client4_2.6.5-0ubuntu8_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i libwsman1_2.6.5-0ubuntu8_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i libwsman-server1_2.6.5-0ubuntu8_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i libcimcclient0_2.2.8-0ubuntu2_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i openwsman_2.6.5-0ubuntu8_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i cim-schema_2.48.0-0ubuntu1_all.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i libsfcutil0_1.0.1-0ubuntu4_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i sfcb_1.4.9-0ubuntu7_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i libcmpicppimpl0_2.0.3-0ubuntu2_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i libssl1.1_1.1.1w-0+deb11u1_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Now we can install OpenManage&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;apt-get install srvadmin-all
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# This will start the OpenManage Services&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/opt/dell/srvadmin/sbin/srvadmin-services.sh start
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/5.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;499&#34;
	srcset=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/5_hu842352693510678679.jpg 480w, http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/5_hu2465498288648819484.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;script content&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;240&#34;
		data-flex-basis=&#34;577px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;
&lt;p&gt;press &lt;code&gt;ctrl + x&lt;/code&gt; to close nano, then press &lt;code&gt;Y&lt;/code&gt; to save your changes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;We then need to give the file executable permissions&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;chmod +x installOpenManage.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/6.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;499&#34;
	srcset=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/6_hu2191444186095182241.jpg 480w, http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/6_hu15385429181475823327.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;executable rights&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;240&#34;
		data-flex-basis=&#34;577px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;Now we can run the script&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./installOpenManage.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Please note that you will need to answer some questions in some of the steps. For example when doing an &amp;ldquo;Upgrade&amp;rdquo;, So keep an eye out for any prompts.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/7.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;636&#34;
	srcset=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/7_hu10108726841576381808.jpg 480w, http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/7_hu10983765712195189782.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;run script&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;188&#34;
		data-flex-basis=&#34;452px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;If everything was successful, you can delete the folder&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; ../
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rm -r opman
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Side Note:
I got most of the information from the following blog post on the Proxmox forum:
&lt;a class=&#34;link&#34; href=&#34;https://forum.proxmox.com/threads/dell-openmanage-on-proxmox-6-x.57932/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://forum.proxmox.com/threads/dell-openmanage-on-proxmox-6-x.57932/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;If you need any more information or troubleshooting, You can go over the original post and see if any of the suggestions in there help you.&lt;/p&gt;
&lt;h2 id=&#34;access-the-web-ui&#34;&gt;Access the Web UI
&lt;/h2&gt;&lt;p&gt;To access the UI, open up your web browser and navigate to:
&lt;a class=&#34;link&#34; href=&#34;https://your.proxmox.ip:1311&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://your.proxmox.ip:1311&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;for example, mine is accessible at:
https://10.0.0.2:1311/&lt;/p&gt;
&lt;p&gt;Then login using your iDRAC user.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/1.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;445&#34;
	srcset=&#34;http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/1_hu9852497011198959126.jpg 480w, http://localhost:1313/post/dell-openanage-server-administrator-12-01-2024/1_hu1874618275632978994.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;PERC Controller&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;269&#34;
		data-flex-basis=&#34;647px&#34;
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Updating a Dell PowerEdge R710</title>
        <link>http://localhost:1313/post/update_dell-r710-11-12-2023/</link>
        <pubDate>Mon, 11 Dec 2023 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/update_dell-r710-11-12-2023/</guid>
        <description>&lt;img src="http://localhost:1313/post/update_dell-r710-11-12-2023/splash.jpg" alt="Featured image of post Updating a Dell PowerEdge R710" /&gt;&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/ycagCHgiz7w&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&#34;you-have-a-new-secondhand-server-what-now&#34;&gt;You have a new secondhand server, what now?
&lt;/h2&gt;&lt;p&gt;The fist thing you need to do when buying an old server is to make sure you clear, reset any passwords (eg IDrac Password), update the bios and firmware to the latest available version.&lt;/p&gt;
&lt;h2 id=&#34;reset-idrac-and-change-the-user-passwords&#34;&gt;Reset iDrac and change the user passwords
&lt;/h2&gt;&lt;p&gt;We will first go into the &amp;ldquo;Remote Access Setup&amp;rdquo; and reset the iDrac settings and users.
You don&amp;rsquo;t want unwanted access to your server so rather do it from the get go and have the peace of mind that you have secured iDrac with your own user details.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Turn on your server and press the &amp;ldquo;CTRL + E&amp;rdquo; key on your keyboard when you see a&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Press CTRL + E for Remote Access Setup within 5 sec&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;message on the screen.&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;Select the &lt;code&gt;&amp;quot;Reset To Default&amp;quot;&lt;/code&gt; option&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Select the &lt;code&gt;LAN User Configuration&lt;/code&gt; option a dialog will open for you to change the &amp;ldquo;Account User Name&amp;rdquo; and &amp;ldquo;Password&amp;rdquo;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Select the &lt;code&gt;Network Settings&lt;/code&gt; and set a static IP that you will be able to access on your network so that you can use iDrac later. In my case it will be &amp;ldquo;10.0.0.4&amp;rdquo;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Press the &amp;ldquo;Esc&amp;rdquo; button on your keyboard and then chooses the &amp;ldquo;Save Changes and Exit&amp;rdquo; option.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;You have now successfully cleared the iDrac Settings and created your new user.&lt;/p&gt;
&lt;h2 id=&#34;where-to-get-the-firmware-and-drivers&#34;&gt;Where to get the firmware and drivers
&lt;/h2&gt;&lt;p&gt;Dells website has all the files you will need to download and install to get your server up to date.&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.dell.com/support/home/en-au/product-support/product/poweredge-r710/drivers&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.dell.com/support/home/en-au/product-support/product/poweredge-r710/drivers&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/1.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;1128&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/1_hu16251697054818617115.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/1_hu15995540731917804938.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Dell Website&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;106&#34;
		data-flex-basis=&#34;255px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;However having to install each file one by one will be a very tedious process and will be very time consuming.&lt;/p&gt;
&lt;p&gt;Dell has a utility called the &amp;ldquo;System update utility&amp;rdquo; (SUU) where you can create a bootable ISO image with all the latest firmware on it that you can boot into, it will see what firmware you need and install them.&lt;/p&gt;
&lt;p&gt;Due to the R710 being end-of-life it is difficult to find and get an easy to use SSU iso with all the latest updates on it. After a lot of searching I found a wonderful forum where the author (Allen Sampsell) hosts a next cloud instance where you can download a 2019 version that has most of the up to date drivers and firmware.&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://forum.allenscloud.com/t/dell-r710-firmware/14&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://forum.allenscloud.com/t/dell-r710-firmware/14&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Edited: 08-06-2024&lt;/p&gt;
&lt;p&gt;PS. just as an update. I do see that forum.allenscloud.com is not online anymore which is a shame. I have however uploaded the ISO to &lt;a class=&#34;link&#34; href=&#34;https://archive.org/details/r-710-bootable&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://archive.org/details/r-710-bootable&lt;/a&gt; So hopefully that helps you.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/8.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;615&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/8_hu1674912689138860802.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/8_hu17618380763051267120.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;forum.allenscloud.com&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;195&#34;
		data-flex-basis=&#34;468px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;creating-a-bootable-usb-from-the-iso&#34;&gt;Creating a bootable USB from the ISO
&lt;/h2&gt;&lt;p&gt;I was only able to create a bootable USB when using &amp;ldquo;Rufus&amp;rdquo; &lt;a class=&#34;link&#34; href=&#34;https://rufus.ie/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://rufus.ie/&lt;/a&gt; other software such as Etcher was not working as it was not creating the boot partition correctly. Rufus was as simple as selecting the ISO, choosing my USB and clicking the &amp;ldquo;Start&amp;rdquo; button.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/9.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/9_hu3494912253648356369.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/9_hu16201860308672407134.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Rufus&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/10.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/10_hu16297146825415021015.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/10_hu14180739130910224415.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Rufus&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;booting-from-the-usb&#34;&gt;Booting from the USB
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;Insert your usb into your server, I have my keyboard and mouse plugged into the front USB ports and have plugged the USB into the back USB port.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/11.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/11_hu10686554231941734608.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/11_hu1427312103835031547.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;server front&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;
&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/12.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/12_hu1876786664619144348.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/12_hu7478422264191277300.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;server back&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Turn on your server and keep pressing the &amp;ldquo;F11&amp;rdquo; key on your keyboard when you see the Dell logo appear. This will eventually open the &amp;ldquo;UEFI Boot Menu&amp;rdquo;. This will also work in legacy / Bios boot mode.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/13.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;674&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/13_hu10318240664140255308.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/13_hu13541372411193153807.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;boot menu&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;178&#34;
		data-flex-basis=&#34;427px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Choose your USB device and your server should boot up using that.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/14.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;674&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/14_hu6375454529671229900.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/14_hu9883117940858506974.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Dell ISO Booting&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;178&#34;
		data-flex-basis=&#34;427px&#34;
	
&gt;
&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/15.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;674&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/15_hu14008572725699639813.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/15_hu3615563046026395418.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Dell ISO Booting&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;178&#34;
		data-flex-basis=&#34;427px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Once it has booted, it will automatically start the update process. Please note that depending on how many updates it needs to do, this can take a very long time (30 minutes +)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/16.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;674&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/16_hu16017754612690119234.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/16_hu4245927511598007260.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Dell Updates Installing&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;178&#34;
		data-flex-basis=&#34;427px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;installing-any-new-firmware-updates-from-a-linux-host-os&#34;&gt;Installing any new firmware updates from a linux host OS.
&lt;/h2&gt;&lt;p&gt;A few weeks later I noticed that the &amp;ldquo;Lifecycle Controller&amp;rdquo; on my server was not updated to the latest available version. So the quickest way for me to install it was to download the file frow Dell&amp;rsquo;s support page and install it through the host OS that I have installed.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Since I have Proxmox installed as the main host OS, I downloaded the &amp;ldquo;.BIN&amp;rdquo; file. In this case it was the &amp;ldquo;Lifecycle-Controller_Legacy_Application_0WFGM_LN_1.7.5.4_A00.BIN&amp;rdquo; file.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/2.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;766&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/2_hu5408192557638375239.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/2_hu10324379323578185447.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Dell Update download&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;156&#34;
		data-flex-basis=&#34;375px&#34;
	
&gt;
&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/3.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/3_hu5962869284455028686.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/3_hu9055076340446411175.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Dell Update download&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;
&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/4.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/4_hu13364705967339135242.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/4_hu13860677086876120069.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Dell Update download&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Using your favourite terminal software, use the &amp;ldquo;SCP&amp;rdquo; command to upload the &amp;ldquo;.BIN&amp;rdquo; file to proxmox. (10.0.0.2 is the IP address of my server)&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;scp /Users/jono/Downloads/Lifecycle-Controller_Legacy_Application_0WFGM_LN_1.7.5.4_A00.BIN root@10.0.0.2:/root
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This will copy the file to the &lt;code&gt;root&lt;/code&gt; folder on proxmox.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/17.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/17_hu9783643937192963088.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/17_hu10945580357757060526.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;scp&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Next, ssh into the proxmox server&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ssh root@10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;We then need to set the file as executable with the following command:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;chmod a+x Lifecycle-Controller_Legacy_Application_0WFGM_LN_1.7.5.4_A00.BIN
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;Now run it with:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./Lifecycle-Controller_Legacy_Application_0WFGM_LN_1.7.5.4_A00.BIN
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/18.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/18_hu7100201193688047260.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/18_hu18307795449730454842.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ssh&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;Press &amp;ldquo;Y&amp;rdquo;. It will install the update if it is compatible with your server, if not it will let you know. This can take a very long time (10 minutes +)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/19.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/19_hu2780412656224995905.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/19_hu8040722513698225578.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;install&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/21.jpg&#34;
	width=&#34;1200&#34;
	height=&#34;900&#34;
	srcset=&#34;http://localhost:1313/post/update_dell-r710-11-12-2023/21_hu9770072612957271873.jpg 480w, http://localhost:1313/post/update_dell-r710-11-12-2023/21_hu14952361086900203111.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;completed&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion
&lt;/h2&gt;&lt;p&gt;If everything went smoothly, you will have an up to date sever, well at least to the latest updates that is available for your server. Since the Dell R710 is end of life, you will not get many new updates.
I tried to install a few of the new &amp;ldquo;SAS and Storage&amp;rdquo; firmware and drivers updates they have available. However I would always get a &amp;ldquo;This Update Package is not compatible with your system configuration&amp;rdquo; message. I was in particular, trying to install the new &amp;ldquo;Samsung&amp;rdquo; SSD firmware updates to try get my &amp;ldquo;Samsung 870&amp;rdquo; to hopefully be seen as a compatible device, but was unsuccessful.&lt;/p&gt;
&lt;p&gt;Please note that the &amp;ldquo;Samsung 870&amp;rdquo; works perfectly so far, I just get a &amp;ldquo;compatibility error&amp;rdquo; all the time on the LCD screen and on iDrac which can be very annoying for me.&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
